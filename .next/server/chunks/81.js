exports.id=81,exports.ids=[81],exports.modules={1790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"connection",{enumerable:!0,get:function(){return l}});let n=r(29294),i=r(63033),a=r(7045),o=r(41757),s=r(6478),c=r(99969);function l(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,c.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(t){if("prerender"===t.type)return(0,s.makeHangingPromise)(t.renderSignal,"`connection()`");"prerender-ppr"===t.type?(0,a.postponeWithTracking)(e.route,"connection",t.dynamicTracking):"prerender-legacy"===t.type&&(0,a.throwToInterruptStaticGeneration)("connection",e,t)}(0,a.trackDynamicDataInDynamicRender)(e,t)}return Promise.resolve(void 0)}},3173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"URLPattern",{enumerable:!0,get:function(){return r}});let r="undefined"==typeof URLPattern?void 0:URLPattern},7439:(e,t,r)=>{"use strict";var n=r(37995);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},15728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return d}});let n=r(50480),i=r(23826),a=r(78866),o=r(48589),s=r(50480),c=Symbol("internal response"),l=new Set([301,302,303,307,308]);function u(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);let r=this.headers,l=new Proxy(new s.ResponseCookies(r),{get(e,i,a){switch(i){case"delete":case"set":return(...a)=>{let o=Reflect.apply(e[i],e,a),c=new Headers(r);return o instanceof s.ResponseCookies&&r.set("x-middleware-set-cookie",o.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),u(t,c),o};default:return o.ReflectAdapter.get(e,i,a)}}});this[c]={cookies:l,url:t.url?new i.NextURL(t.url,{headers:(0,a.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[c].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!l.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,a.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,a.validateURL)(e)),u(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),u(e,t),new d(null,{...e,headers:t})}}},15911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ImageResponse:function(){return n.ImageResponse},NextRequest:function(){return i.NextRequest},NextResponse:function(){return a.NextResponse},URLPattern:function(){return s.URLPattern},after:function(){return c.after},connection:function(){return l.connection},unstable_rootParams:function(){return u.unstable_rootParams},userAgent:function(){return o.userAgent},userAgentFromString:function(){return o.userAgentFromString}});let n=r(18096),i=r(43930),a=r(15728),o=r(22768),s=r(3173),c=r(33031),l=r(1790),u=r(47953)},16422:(e,t,r)=>{"use strict";Object.defineProperty(t,"b",{enumerable:!0,get:function(){return d}});let n=r(79174),i=r(29294),a=r(63033),o=r(7045),s=r(41757),c=r(6478),l=r(60888),u=(r(11249),r(99969));function d(){let e=i.workAsyncStorage.getStore(),t=a.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,u.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(e.forceStatic)return h(n.HeadersAdapter.seal(new Headers({})));if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(t){if("prerender"===t.type)return function(e,t){let r=p.get(t);if(r)return r;let n=(0,c.makeHangingPromise)(t.renderSignal,"`headers()`");return p.set(t,n),Object.defineProperties(n,{append:{value:function(){let r=`\`headers().append(${f(arguments[0])}, ...)\``,n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},delete:{value:function(){let r=`\`headers().delete(${f(arguments[0])})\``,n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},get:{value:function(){let r=`\`headers().get(${f(arguments[0])})\``,n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},has:{value:function(){let r=`\`headers().has(${f(arguments[0])})\``,n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},set:{value:function(){let r=`\`headers().set(${f(arguments[0])}, ...)\``,n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},getSetCookie:{value:function(){let r="`headers().getSetCookie()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},forEach:{value:function(){let r="`headers().forEach(...)`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},keys:{value:function(){let r="`headers().keys()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},values:{value:function(){let r="`headers().values()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},entries:{value:function(){let r="`headers().entries()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},[Symbol.iterator]:{value:function(){let r="`headers()[Symbol.iterator]()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}}}),n}(e.route,t);"prerender-ppr"===t.type?(0,o.postponeWithTracking)(e.route,"headers",t.dynamicTracking):"prerender-legacy"===t.type&&(0,o.throwToInterruptStaticGeneration)("headers",e,t)}(0,o.trackDynamicDataInDynamicRender)(e,t)}return h((0,a.getExpectedRequestStore)("headers").headers)}let p=new WeakMap;function h(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),Object.defineProperties(r,{append:{value:e.append.bind(e)},delete:{value:e.delete.bind(e)},get:{value:e.get.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},getSetCookie:{value:e.getSetCookie.bind(e)},forEach:{value:e.forEach.bind(e)},keys:{value:e.keys.bind(e)},values:{value:e.values.bind(e)},entries:{value:e.entries.bind(e)},[Symbol.iterator]:{value:e[Symbol.iterator].bind(e)}}),r}function f(e){return"string"==typeof e?`'${e}'`:"..."}let m=(0,l.createDedupedByCallsiteServerErrorLoggerDev)(y);function y(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}},18096:(e,t)=>{"use strict";function r(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return r}})},19403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let n=""+r(29446).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},22637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(28764).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},22768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isBot:function(){return i},userAgent:function(){return o},userAgentFromString:function(){return a}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(85551));function i(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function a(e){return{...(0,n.default)(e),isBot:void 0!==e&&i(e)}}function o({headers:e}){return a(e.get("user-agent")||void 0)}},23680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return m},encryptActionBoundArgs:function(){return f}}),r(78596);let n=r(51129),i=r(87951),a=r(45093),o=r(92020),s=r(63033),c=r(7045),l=function(e){return e&&e.__esModule?e:{default:e}}(r(73250)),u=new TextEncoder,d=new TextDecoder;async function p(e,t){let r=await (0,o.getActionEncryptionKey)();if(void 0===r)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=atob(t),i=n.slice(0,16),a=n.slice(16),s=d.decode(await (0,o.decrypt)(r,(0,o.stringToUint8Array)(i),(0,o.stringToUint8Array)(a)));if(!s.startsWith(e))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return s.slice(e.length)}async function h(e,t){let r=await (0,o.getActionEncryptionKey)();if(void 0===r)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=new Uint8Array(16);s.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let i=(0,o.arrayBufferToString)(n.buffer),a=await (0,o.encrypt)(r,n,u.encode(e+t));return btoa(i+(0,o.arrayBufferToString)(a))}let f=l.default.cache(async function e(t,...r){let{clientModules:i}=(0,o.getClientReferenceManifestForRsc)(),l=Error();Error.captureStackTrace(l,e);let u=!1,d=s.workUnitAsyncStorage.getStore(),p=(null==d?void 0:d.type)==="prerender"?(0,c.createHangingInputAbortSignal)(d):void 0,f=await (0,a.streamToString)((0,n.renderToReadableStream)(r,i,{signal:p,onError(e){(null==p||!p.aborted)&&!u&&(u=!0,l.message=e instanceof Error?e.message:String(e))}}),p);if(u)throw l;if(!d)return h(t,f);let m=(0,s.getPrerenderResumeDataCache)(d),y=(0,s.getRenderResumeDataCache)(d),g=t+f,b=(null==m?void 0:m.encryptedBoundArgs.get(g))??(null==y?void 0:y.encryptedBoundArgs.get(g));if(b)return b;let w="prerender"===d.type?d.cacheSignal:void 0;null==w||w.beginRead();let _=await h(t,f);return null==w||w.endRead(),null==m||m.encryptedBoundArgs.set(g,_),_});async function m(e,t){let r;let n=await t,a=s.workUnitAsyncStorage.getStore();if(a){let t="prerender"===a.type?a.cacheSignal:void 0,i=(0,s.getPrerenderResumeDataCache)(a),o=(0,s.getRenderResumeDataCache)(a);(r=(null==i?void 0:i.decryptedBoundArgs.get(n))??(null==o?void 0:o.decryptedBoundArgs.get(n)))||(null==t||t.beginRead(),r=await p(e,n),null==t||t.endRead(),null==i||i.decryptedBoundArgs.set(n,r))}else r=await p(e,n);let{edgeRscModuleMapping:c,rscModuleMapping:l}=(0,o.getClientReferenceManifestForRsc)();return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(u.encode(r)),(null==a?void 0:a.type)==="prerender"?a.renderSignal.aborted?e.close():a.renderSignal.addEventListener("abort",()=>e.close(),{once:!0}):e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:l,serverModuleMap:(0,o.getServerModuleMap)()}})}},26983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return p},ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return d},areCookiesMutableInCurrentPhase:function(){return f},getModifiedCookieValues:function(){return u},responseCookiesToRequestCookies:function(){return y},wrapWithMutableAccessCheck:function(){return h}});let n=r(50480),i=r(48589),a=r(29294),o=r(63033);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new s}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function u(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=u(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),a=i.getAll();for(let e of r)i.set(e);for(let e of a)i.set(e);return!0}class p{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let o=[],s=new Set,c=()=>{let e=a.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),o=r.getAll().filter(e=>s.has(e.name)),t){let e=[];for(let t of o){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case l:return o;case"delete":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{c()}};case"set":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}});return u}}function h(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return m("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return m("cookies().set"),e.set(...r),t};default:return i.ReflectAdapter.get(e,r,n)}}});return t}function f(e){return"action"===e.phase}function m(e){if(!f((0,o.getExpectedRequestStore)(e)))throw new s}function y(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},28540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return a},normalizeRscURL:function(){return o}});let n=r(95069),i=r(33553);function a(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function o(e){return e.replace(/\.rsc($|\?)/,"$1")}},28764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,o.isNextRouterError)(t)||(0,a.isBailoutToCSRError)(t)||(0,c.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,i.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(6478),i=r(80923),a=r(72944),o=r(86836),s=r(7045),c=r(44777);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},30365:(e,t,r)=>{"use strict";let n;r.d(t,{z:()=>tl}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(tn||(tn={})),(ti||(ti={})).mergeShapes=(e,t)=>({...e,...t});let i=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),a=e=>{switch(typeof e){case"undefined":return i.undefined;case"string":return i.string;case"number":return isNaN(e)?i.nan:i.number;case"boolean":return i.boolean;case"function":return i.function;case"bigint":return i.bigint;case"symbol":return i.symbol;case"object":if(Array.isArray(e))return i.array;if(null===e)return i.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return i.promise;if("undefined"!=typeof Map&&e instanceof Map)return i.map;if("undefined"!=typeof Set&&e instanceof Set)return i.set;if("undefined"!=typeof Date&&e instanceof Date)return i.date;return i.object;default:return i.unknown}},o=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class s extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof s))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}s.create=e=>new s(e);let c=(e,t)=>{let r;switch(e.code){case o.invalid_type:r=e.received===i.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case o.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,tn.jsonStringifyReplacer)}`;break;case o.unrecognized_keys:r=`Unrecognized key(s) in object: ${tn.joinValues(e.keys,", ")}`;break;case o.invalid_union:r="Invalid input";break;case o.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${tn.joinValues(e.options)}`;break;case o.invalid_enum_value:r=`Invalid enum value. Expected ${tn.joinValues(e.options)}, received '${e.received}'`;break;case o.invalid_arguments:r="Invalid function arguments";break;case o.invalid_return_type:r="Invalid function return type";break;case o.invalid_date:r="Invalid date";break;case o.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:tn.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case o.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case o.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case o.custom:r="Invalid input";break;case o.invalid_intersection_types:r="Intersection results could not be merged";break;case o.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case o.not_finite:r="Number must be finite";break;default:r=t.defaultError,tn.assertNever(e)}return{message:r}},l=c;function u(){return l}let d=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],o={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let s="";for(let e of n.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return{...i,path:a,message:s}};function p(e,t){let r=u(),n=d({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===c?void 0:c].filter(e=>!!e)});e.common.issues.push(n)}class h{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return f;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return h.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return f;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let f=Object.freeze({status:"aborted"}),m=e=>({status:"dirty",value:e}),y=e=>({status:"valid",value:e}),g=e=>"aborted"===e.status,b=e=>"dirty"===e.status,w=e=>"valid"===e.status,_=e=>"undefined"!=typeof Promise&&e instanceof Promise;function v(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function k(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(ta||(ta={}));class E{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let S=(e,t)=>{if(w(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new s(e.common.issues);return this._error=t,this._error}}};function A(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var a,o;let{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:i.defaultError}:void 0===i.data?{message:null!==(a=null!=s?s:n)&&void 0!==a?a:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!=s?s:r)&&void 0!==o?o:i.defaultError}},description:i}}class x{get description(){return this._def.description}_getType(e){return a(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new h,ctx:{common:e.parent.common,data:e.data,parsedType:a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(_(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:a(e)},i=this._parseSync({data:e,path:n.path,parent:n});return S(n,i)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:a(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return w(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>w(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:a(e)},n=this._parse({data:e,path:r.path,parent:r});return S(r,await (_(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),a=()=>n.addIssue({code:o.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new e_({schema:this,typeName:tc.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ev.create(this,this._def)}nullable(){return ek.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return en.create(this)}promise(){return ew.create(this,this._def)}or(e){return ea.create([this,e],this._def)}and(e){return ec.create(this,e,this._def)}transform(e){return new e_({...A(this._def),schema:this,typeName:tc.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eE({...A(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:tc.ZodDefault})}brand(){return new eR({typeName:tc.ZodBranded,type:this,...A(this._def)})}catch(e){return new eS({...A(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:tc.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eT.create(this,e)}readonly(){return eO.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let R=/^c[^\s-]{8,}$/i,T=/^[0-9a-z]+$/,O=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,C=/^[a-z0-9_-]{21}$/i,j=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,U=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,N=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,L=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,W="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",K=RegExp(`^${W}$`);function Z(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function J(e){let t=`${W}T${Z(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class B extends x{_parse(e){var t,r,a,s;let c;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==i.string){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.string,received:t.parsedType}),f}let l=new h;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(p(c=this._getOrReturnCtx(e,c),{code:o.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),l.dirty());else if("max"===i.kind)e.data.length>i.value&&(p(c=this._getOrReturnCtx(e,c),{code:o.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),l.dirty());else if("length"===i.kind){let t=e.data.length>i.value,r=e.data.length<i.value;(t||r)&&(c=this._getOrReturnCtx(e,c),t?p(c,{code:o.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&p(c,{code:o.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),l.dirty())}else if("email"===i.kind)$.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"email",code:o.invalid_string,message:i.message}),l.dirty());else if("emoji"===i.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"emoji",code:o.invalid_string,message:i.message}),l.dirty());else if("uuid"===i.kind)P.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"uuid",code:o.invalid_string,message:i.message}),l.dirty());else if("nanoid"===i.kind)C.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"nanoid",code:o.invalid_string,message:i.message}),l.dirty());else if("cuid"===i.kind)R.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"cuid",code:o.invalid_string,message:i.message}),l.dirty());else if("cuid2"===i.kind)T.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"cuid2",code:o.invalid_string,message:i.message}),l.dirty());else if("ulid"===i.kind)O.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"ulid",code:o.invalid_string,message:i.message}),l.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(t){p(c=this._getOrReturnCtx(e,c),{validation:"url",code:o.invalid_string,message:i.message}),l.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"regex",code:o.invalid_string,message:i.message}),l.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(p(c=this._getOrReturnCtx(e,c),{code:o.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),l.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(p(c=this._getOrReturnCtx(e,c),{code:o.invalid_string,validation:{startsWith:i.value},message:i.message}),l.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(p(c=this._getOrReturnCtx(e,c),{code:o.invalid_string,validation:{endsWith:i.value},message:i.message}),l.dirty()):"datetime"===i.kind?J(i).test(e.data)||(p(c=this._getOrReturnCtx(e,c),{code:o.invalid_string,validation:"datetime",message:i.message}),l.dirty()):"date"===i.kind?K.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{code:o.invalid_string,validation:"date",message:i.message}),l.dirty()):"time"===i.kind?RegExp(`^${Z(i)}$`).test(e.data)||(p(c=this._getOrReturnCtx(e,c),{code:o.invalid_string,validation:"time",message:i.message}),l.dirty()):"duration"===i.kind?U.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"duration",code:o.invalid_string,message:i.message}),l.dirty()):"ip"===i.kind?(t=e.data,!(("v4"===(r=i.version)||!r)&&I.test(t)||("v6"===r||!r)&&N.test(t))&&(p(c=this._getOrReturnCtx(e,c),{validation:"ip",code:o.invalid_string,message:i.message}),l.dirty())):"jwt"===i.kind?!function(e,t){if(!j.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,i.alg)&&(p(c=this._getOrReturnCtx(e,c),{validation:"jwt",code:o.invalid_string,message:i.message}),l.dirty()):"cidr"===i.kind?(a=e.data,!(("v4"===(s=i.version)||!s)&&D.test(a)||("v6"===s||!s)&&H.test(a))&&(p(c=this._getOrReturnCtx(e,c),{validation:"cidr",code:o.invalid_string,message:i.message}),l.dirty())):"base64"===i.kind?M.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"base64",code:o.invalid_string,message:i.message}),l.dirty()):"base64url"===i.kind?L.test(e.data)||(p(c=this._getOrReturnCtx(e,c),{validation:"base64url",code:o.invalid_string,message:i.message}),l.dirty()):tn.assertNever(i);return{status:l.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:o.invalid_string,...ta.errToObj(r)})}_addCheck(e){return new B({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ta.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ta.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ta.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ta.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ta.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ta.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ta.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ta.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ta.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ta.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ta.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ta.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ta.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...ta.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...ta.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ta.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ta.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...ta.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ta.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ta.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ta.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ta.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ta.errToObj(t)})}nonempty(e){return this.min(1,ta.errToObj(e))}trim(){return new B({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new B({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new B({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}B.create=e=>{var t;return new B({checks:[],typeName:tc.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...A(e)})};class q extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==i.number){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.number,received:t.parsedType}),f}let r=new h;for(let n of this._def.checks)"int"===n.kind?tn.isInteger(e.data)||(p(t=this._getOrReturnCtx(e,t),{code:o.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(p(t=this._getOrReturnCtx(e,t),{code:o.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(p(t=this._getOrReturnCtx(e,t),{code:o.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}(e.data,n.value)&&(p(t=this._getOrReturnCtx(e,t),{code:o.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(p(t=this._getOrReturnCtx(e,t),{code:o.not_finite,message:n.message}),r.dirty()):tn.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ta.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ta.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ta.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ta.toString(t))}setLimit(e,t,r,n){return new q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ta.toString(n)}]})}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ta.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ta.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ta.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ta.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ta.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ta.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ta.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ta.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ta.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&tn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}q.create=e=>new q({checks:[],typeName:tc.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...A(e)});class z extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==i.bigint)return this._getInvalidInput(e);let r=new h;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(p(t=this._getOrReturnCtx(e,t),{code:o.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(p(t=this._getOrReturnCtx(e,t),{code:o.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(p(t=this._getOrReturnCtx(e,t),{code:o.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):tn.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.bigint,received:t.parsedType}),f}gte(e,t){return this.setLimit("min",e,!0,ta.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ta.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ta.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ta.toString(t))}setLimit(e,t,r,n){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ta.toString(n)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ta.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ta.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ta.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ta.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ta.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}z.create=e=>{var t;return new z({checks:[],typeName:tc.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...A(e)})};class F extends x{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==i.boolean){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.boolean,received:t.parsedType}),f}return y(e.data)}}F.create=e=>new F({typeName:tc.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...A(e)});class V extends x{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==i.date){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.date,received:t.parsedType}),f}if(isNaN(e.data.getTime()))return p(this._getOrReturnCtx(e),{code:o.invalid_date}),f;let r=new h;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(p(t=this._getOrReturnCtx(e,t),{code:o.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(p(t=this._getOrReturnCtx(e,t),{code:o.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):tn.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new V({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ta.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ta.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}V.create=e=>new V({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:tc.ZodDate,...A(e)});class G extends x{_parse(e){if(this._getType(e)!==i.symbol){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.symbol,received:t.parsedType}),f}return y(e.data)}}G.create=e=>new G({typeName:tc.ZodSymbol,...A(e)});class X extends x{_parse(e){if(this._getType(e)!==i.undefined){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.undefined,received:t.parsedType}),f}return y(e.data)}}X.create=e=>new X({typeName:tc.ZodUndefined,...A(e)});class Y extends x{_parse(e){if(this._getType(e)!==i.null){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.null,received:t.parsedType}),f}return y(e.data)}}Y.create=e=>new Y({typeName:tc.ZodNull,...A(e)});class Q extends x{constructor(){super(...arguments),this._any=!0}_parse(e){return y(e.data)}}Q.create=e=>new Q({typeName:tc.ZodAny,...A(e)});class ee extends x{constructor(){super(...arguments),this._unknown=!0}_parse(e){return y(e.data)}}ee.create=e=>new ee({typeName:tc.ZodUnknown,...A(e)});class et extends x{_parse(e){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.never,received:t.parsedType}),f}}et.create=e=>new et({typeName:tc.ZodNever,...A(e)});class er extends x{_parse(e){if(this._getType(e)!==i.undefined){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.void,received:t.parsedType}),f}return y(e.data)}}er.create=e=>new er({typeName:tc.ZodVoid,...A(e)});class en extends x{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==i.array)return p(t,{code:o.invalid_type,expected:i.array,received:t.parsedType}),f;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(p(t,{code:e?o.too_big:o.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(p(t,{code:o.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(p(t,{code:o.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new E(t,e,t.path,r)))).then(e=>h.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new E(t,e,t.path,r)));return h.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new en({...this._def,minLength:{value:e,message:ta.toString(t)}})}max(e,t){return new en({...this._def,maxLength:{value:e,message:ta.toString(t)}})}length(e,t){return new en({...this._def,exactLength:{value:e,message:ta.toString(t)}})}nonempty(e){return this.min(1,e)}}en.create=(e,t)=>new en({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tc.ZodArray,...A(t)});class ei extends x{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=tn.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==i.object){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.object,received:t.parsedType}),f}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof et&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let c=[];for(let e of a){let t=n[e],i=r.data[e];c.push({key:{status:"valid",value:e},value:t._parse(new E(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof et){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)c.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(p(r,{code:o.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];c.push({key:{status:"valid",value:t},value:e._parse(new E(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of c){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>h.mergeObjectSync(t,e)):h.mergeObjectSync(t,c)}get shape(){return this._def.shape()}strict(e){return ta.errToObj,new ei({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,a,o;let s=null!==(a=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==a?a:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=ta.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}})}strip(){return new ei({...this._def,unknownKeys:"strip"})}passthrough(){return new ei({...this._def,unknownKeys:"passthrough"})}extend(e){return new ei({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ei({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tc.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ei({...this._def,catchall:e})}pick(e){let t={};return tn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ei({...this._def,shape:()=>t})}omit(e){let t={};return tn.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ei({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ei){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=ev.create(e(i))}return new ei({...t._def,shape:()=>r})}if(t instanceof en)return new en({...t._def,type:e(t.element)});if(t instanceof ev)return ev.create(e(t.unwrap()));if(t instanceof ek)return ek.create(e(t.unwrap()));if(t instanceof el)return el.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return tn.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new ei({...this._def,shape:()=>t})}required(e){let t={};return tn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ev;)e=e._def.innerType;t[r]=e}}),new ei({...this._def,shape:()=>t})}keyof(){return ey(tn.objectKeys(this.shape))}}ei.create=(e,t)=>new ei({shape:()=>e,unknownKeys:"strip",catchall:et.create(),typeName:tc.ZodObject,...A(t)}),ei.strictCreate=(e,t)=>new ei({shape:()=>e,unknownKeys:"strict",catchall:et.create(),typeName:tc.ZodObject,...A(t)}),ei.lazycreate=(e,t)=>new ei({shape:e,unknownKeys:"strip",catchall:et.create(),typeName:tc.ZodObject,...A(t)});class ea extends x{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new s(e.ctx.common.issues));return p(t,{code:o.invalid_union,unionErrors:r}),f});{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new s(e));return p(t,{code:o.invalid_union,unionErrors:i}),f}}get options(){return this._def.options}}ea.create=(e,t)=>new ea({options:e,typeName:tc.ZodUnion,...A(t)});let eo=e=>{if(e instanceof ef)return eo(e.schema);if(e instanceof e_)return eo(e.innerType());if(e instanceof em)return[e.value];if(e instanceof eg)return e.options;if(e instanceof eb)return tn.objectValues(e.enum);else if(e instanceof eE)return eo(e._def.innerType);else if(e instanceof X)return[void 0];else if(e instanceof Y)return[null];else if(e instanceof ev)return[void 0,...eo(e.unwrap())];else if(e instanceof ek)return[null,...eo(e.unwrap())];else if(e instanceof eR)return eo(e.unwrap());else if(e instanceof eO)return eo(e.unwrap());else if(e instanceof eS)return eo(e._def.innerType);else return[]};class es extends x{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.object)return p(t,{code:o.invalid_type,expected:i.object,received:t.parsedType}),f;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(p(t,{code:o.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),f)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=eo(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new es({typeName:tc.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...A(r)})}}class ec extends x{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(g(e)||g(n))return f;let s=function e(t,r){let n=a(t),o=a(r);if(t===r)return{valid:!0,data:t};if(n===i.object&&o===i.object){let n=tn.objectKeys(r),i=tn.objectKeys(t).filter(e=>-1!==n.indexOf(e)),a={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};a[n]=i.data}return{valid:!0,data:a}}if(n===i.array&&o===i.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}if(n===i.date&&o===i.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return s.valid?((b(e)||b(n))&&t.dirty(),{status:t.value,value:s.data}):(p(r,{code:o.invalid_intersection_types}),f)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ec.create=(e,t,r)=>new ec({left:e,right:t,typeName:tc.ZodIntersection,...A(r)});class el extends x{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.array)return p(r,{code:o.invalid_type,expected:i.array,received:r.parsedType}),f;if(r.data.length<this._def.items.length)return p(r,{code:o.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),f;!this._def.rest&&r.data.length>this._def.items.length&&(p(r,{code:o.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new E(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>h.mergeArray(t,e)):h.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new el({...this._def,rest:e})}}el.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new el({items:e,typeName:tc.ZodTuple,rest:null,...A(t)})};class eu extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.object)return p(r,{code:o.invalid_type,expected:i.object,received:r.parsedType}),f;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new E(r,e,r.path,e)),value:s._parse(new E(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?h.mergeObjectAsync(t,n):h.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new eu(t instanceof x?{keyType:e,valueType:t,typeName:tc.ZodRecord,...A(r)}:{keyType:B.create(),valueType:e,typeName:tc.ZodRecord,...A(t)})}}class ed extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.map)return p(r,{code:o.invalid_type,expected:i.map,received:r.parsedType}),f;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new E(r,e,r.path,[i,"key"])),value:a._parse(new E(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return f;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return f;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}ed.create=(e,t,r)=>new ed({valueType:t,keyType:e,typeName:tc.ZodMap,...A(r)});class ep extends x{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.set)return p(r,{code:o.invalid_type,expected:i.set,received:r.parsedType}),f;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(p(r,{code:o.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(p(r,{code:o.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return f;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let c=[...r.data.values()].map((e,t)=>a._parse(new E(r,e,r.path,t)));return r.common.async?Promise.all(c).then(e=>s(e)):s(c)}min(e,t){return new ep({...this._def,minSize:{value:e,message:ta.toString(t)}})}max(e,t){return new ep({...this._def,maxSize:{value:e,message:ta.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ep.create=(e,t)=>new ep({valueType:e,minSize:null,maxSize:null,typeName:tc.ZodSet,...A(t)});class eh extends x{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.function)return p(t,{code:o.invalid_type,expected:i.function,received:t.parsedType}),f;function r(e,r){return d({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u(),c].filter(e=>!!e),issueData:{code:o.invalid_arguments,argumentsError:r}})}function n(e,r){return d({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u(),c].filter(e=>!!e),issueData:{code:o.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof ew){let e=this;return y(async function(...t){let i=new s([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),c=await Reflect.apply(l,this,o);return await e._def.returns._def.type.parseAsync(c,a).catch(e=>{throw i.addIssue(n(c,e)),i})})}{let e=this;return y(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new s([r(t,i.error)]);let o=Reflect.apply(l,this,i.data),c=e._def.returns.safeParse(o,a);if(!c.success)throw new s([n(o,c.error)]);return c.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eh({...this._def,args:el.create(e).rest(ee.create())})}returns(e){return new eh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eh({args:e||el.create([]).rest(ee.create()),returns:t||ee.create(),typeName:tc.ZodFunction,...A(r)})}}class ef extends x{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ef.create=(e,t)=>new ef({getter:e,typeName:tc.ZodLazy,...A(t)});class em extends x{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return p(t,{received:t.data,code:o.invalid_literal,expected:this._def.value}),f}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ey(e,t){return new eg({values:e,typeName:tc.ZodEnum,...A(t)})}em.create=(e,t)=>new em({value:e,typeName:tc.ZodLiteral,...A(t)});class eg extends x{constructor(){super(...arguments),to.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return p(t,{expected:tn.joinValues(r),received:t.parsedType,code:o.invalid_type}),f}if(v(this,to,"f")||k(this,to,new Set(this._def.values),"f"),!v(this,to,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return p(t,{received:t.data,code:o.invalid_enum_value,options:r}),f}return y(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eg.create(e,{...this._def,...t})}exclude(e,t=this._def){return eg.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}to=new WeakMap,eg.create=ey;class eb extends x{constructor(){super(...arguments),ts.set(this,void 0)}_parse(e){let t=tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==i.string&&r.parsedType!==i.number){let e=tn.objectValues(t);return p(r,{expected:tn.joinValues(e),received:r.parsedType,code:o.invalid_type}),f}if(v(this,ts,"f")||k(this,ts,new Set(tn.getValidEnumValues(this._def.values)),"f"),!v(this,ts,"f").has(e.data)){let e=tn.objectValues(t);return p(r,{received:r.data,code:o.invalid_enum_value,options:e}),f}return y(e.data)}get enum(){return this._def.values}}ts=new WeakMap,eb.create=(e,t)=>new eb({values:e,typeName:tc.ZodNativeEnum,...A(t)});class ew extends x{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==i.promise&&!1===t.common.async?(p(t,{code:o.invalid_type,expected:i.promise,received:t.parsedType}),f):y((t.parsedType===i.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ew.create=(e,t)=>new ew({type:e,typeName:tc.ZodPromise,...A(t)});class e_ extends x{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tc.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{p(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return f;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?f:"dirty"===n.status||"dirty"===t.value?m(n.value):n});{if("aborted"===t.value)return f;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?f:"dirty"===n.status||"dirty"===t.value?m(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?f:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?f:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>w(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!w(e))return e;let a=n.transform(e.value,i);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}}tn.assertNever(n)}}e_.create=(e,t,r)=>new e_({schema:e,typeName:tc.ZodEffects,effect:t,...A(r)}),e_.createWithPreprocess=(e,t,r)=>new e_({schema:t,effect:{type:"preprocess",transform:e},typeName:tc.ZodEffects,...A(r)});class ev extends x{_parse(e){return this._getType(e)===i.undefined?y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ev.create=(e,t)=>new ev({innerType:e,typeName:tc.ZodOptional,...A(t)});class ek extends x{_parse(e){return this._getType(e)===i.null?y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ek.create=(e,t)=>new ek({innerType:e,typeName:tc.ZodNullable,...A(t)});class eE extends x{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===i.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:tc.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...A(t)});class eS extends x{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new s(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new s(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eS.create=(e,t)=>new eS({innerType:e,typeName:tc.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...A(t)});class eA extends x{_parse(e){if(this._getType(e)!==i.nan){let t=this._getOrReturnCtx(e);return p(t,{code:o.invalid_type,expected:i.nan,received:t.parsedType}),f}return{status:"valid",value:e.data}}}eA.create=e=>new eA({typeName:tc.ZodNaN,...A(e)});let ex=Symbol("zod_brand");class eR extends x{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eT extends x{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?f:"dirty"===e.status?(t.dirty(),m(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?f:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eT({in:e,out:t,typeName:tc.ZodPipeline})}}class eO extends x{_parse(e){let t=this._def.innerType._parse(e),r=e=>(w(e)&&(e.value=Object.freeze(e.value)),e);return _(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eP(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eC(e,t={},r){return e?Q.create().superRefine((n,i)=>{var a,o;let s=e(n);if(s instanceof Promise)return s.then(e=>{var a,o;if(!e){let e=eP(t,n),s=null===(o=null!==(a=e.fatal)&&void 0!==a?a:r)||void 0===o||o;i.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=eP(t,n),s=null===(o=null!==(a=e.fatal)&&void 0!==a?a:r)||void 0===o||o;i.addIssue({code:"custom",...e,fatal:s})}}):Q.create()}eO.create=(e,t)=>new eO({innerType:e,typeName:tc.ZodReadonly,...A(t)});let ej={object:ei.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(tc||(tc={}));let eU=B.create,e$=q.create,eI=eA.create,eD=z.create,eN=F.create,eH=V.create,eM=G.create,eL=X.create,eW=Y.create,eK=Q.create,eZ=ee.create,eJ=et.create,eB=er.create,eq=en.create,ez=ei.create,eF=ei.strictCreate,eV=ea.create,eG=es.create,eX=ec.create,eY=el.create,eQ=eu.create,e0=ed.create,e1=ep.create,e2=eh.create,e5=ef.create,e4=em.create,e3=eg.create,e6=eb.create,e9=ew.create,e8=e_.create,e7=ev.create,te=ek.create,tt=e_.createWithPreprocess,tr=eT.create;var tn,ti,ta,to,ts,tc,tl=Object.freeze({__proto__:null,defaultErrorMap:c,setErrorMap:function(e){l=e},getErrorMap:u,makeIssue:d,EMPTY_PATH:[],addIssueToContext:p,ParseStatus:h,INVALID:f,DIRTY:m,OK:y,isAborted:g,isDirty:b,isValid:w,isAsync:_,get util(){return tn},get objectUtil(){return ti},ZodParsedType:i,getParsedType:a,ZodType:x,datetimeRegex:J,ZodString:B,ZodNumber:q,ZodBigInt:z,ZodBoolean:F,ZodDate:V,ZodSymbol:G,ZodUndefined:X,ZodNull:Y,ZodAny:Q,ZodUnknown:ee,ZodNever:et,ZodVoid:er,ZodArray:en,ZodObject:ei,ZodUnion:ea,ZodDiscriminatedUnion:es,ZodIntersection:ec,ZodTuple:el,ZodRecord:eu,ZodMap:ed,ZodSet:ep,ZodFunction:eh,ZodLazy:ef,ZodLiteral:em,ZodEnum:eg,ZodNativeEnum:eb,ZodPromise:ew,ZodEffects:e_,ZodTransformer:e_,ZodOptional:ev,ZodNullable:ek,ZodDefault:eE,ZodCatch:eS,ZodNaN:eA,BRAND:ex,ZodBranded:eR,ZodPipeline:eT,ZodReadonly:eO,custom:eC,Schema:x,ZodSchema:x,late:ej,get ZodFirstPartyTypeKind(){return tc},coerce:{string:e=>B.create({...e,coerce:!0}),number:e=>q.create({...e,coerce:!0}),boolean:e=>F.create({...e,coerce:!0}),bigint:e=>z.create({...e,coerce:!0}),date:e=>V.create({...e,coerce:!0})},any:eK,array:eq,bigint:eD,boolean:eN,date:eH,discriminatedUnion:eG,effect:e8,enum:e3,function:e2,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>eC(t=>t instanceof e,t),intersection:eX,lazy:e5,literal:e4,map:e0,nan:eI,nativeEnum:e6,never:eJ,null:eW,nullable:te,number:e$,object:ez,oboolean:()=>eN().optional(),onumber:()=>e$().optional(),optional:e7,ostring:()=>eU().optional(),pipeline:tr,preprocess:tt,promise:e9,record:eQ,set:e1,strictObject:eF,string:eU,symbol:eM,transformer:e8,tuple:eY,undefined:eL,union:eV,unknown:eZ,void:eB,NEVER:f,ZodIssueCode:o,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:s})},33031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})}(r(43221),t)},34554:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(13072);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))})},42366:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n)}return i}(e))&&(n&&(n+=" "),n+=t);return n}},43221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"after",{enumerable:!0,get:function(){return i}});let n=r(29294);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},47953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rootParams",{enumerable:!0,get:function(){return u}});let n=r(49827),i=r(7045),a=r(29294),o=r(63033),s=r(6478),c=r(3475),l=new WeakMap;async function u(){let e=a.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new n.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let t=o.workUnitAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(t.type){case"unstable-cache":case"cache":throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-ppr":case"prerender-legacy":return function(e,t,r){let n=t.fallbackRouteParams;if(n){let a=!1;for(let t in e)if(n.has(t)){a=!0;break}if(a){if("prerender"===r.type){let t=l.get(e);if(t)return t;let n=(0,s.makeHangingPromise)(r.renderSignal,"`unstable_rootParams`");return l.set(e,n),n}return function(e,t,r,n){let a=l.get(e);if(a)return a;let o={...e},s=Promise.resolve(o);return l.set(e,s),Object.keys(e).forEach(a=>{c.wellKnownProperties.has(a)||(t.has(a)?Object.defineProperty(o,a,{get(){let e=(0,c.describeStringPropertyAccess)("unstable_rootParams",a);"prerender-ppr"===n.type?(0,i.postponeWithTracking)(r.route,e,n.dynamicTracking):(0,i.throwToInterruptStaticGeneration)(e,r,n)},enumerable:!0}):s[a]=e[a])}),s}(e,n,t,r)}}return Promise.resolve(e)}(t.rootParams,e,t);default:return Promise.resolve(t.rootParams)}}},51572:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=r(51129)},54563:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(13072);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))})},59726:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(29446).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},61618:(e,t,r)=>{"use strict";var n=r(80898);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},62921:(e,t,r)=>{"use strict";function n(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}r.d(t,{A:()=>n})},64614:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(13072);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))})},66596:(e,t,r)=>{"use strict";let n,i,a,o,s;r.d(t,{lR:()=>h,xz:()=>v,Ay:()=>od});var c={};r.r(c),r.d(c,{q:()=>tJ,l:()=>tz});var l=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},u=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function d(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class p{constructor(e,t,r){if(rb.add(this),rw.set(this,{}),r_.set(this,void 0),rv.set(this,void 0),l(this,rv,r,"f"),l(this,r_,e,"f"),!t)return;let{name:n}=e;for(let[e,r]of Object.entries(t))e.startsWith(n)&&r&&(u(this,rw,"f")[e]=r)}get value(){return Object.keys(u(this,rw,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>u(this,rw,"f")[e]).join("")}chunk(e,t){let r=u(this,rb,"m",rE).call(this);for(let n of u(this,rb,"m",rk).call(this,{name:u(this,r_,"f").name,value:e,options:{...u(this,r_,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(u(this,rb,"m",rE).call(this))}}rw=new WeakMap,r_=new WeakMap,rv=new WeakMap,rb=new WeakSet,rk=function(e){let t=Math.ceil(e.value.length/3936);if(1===t)return u(this,rw,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(3936*n,3936);r.push({...e,name:t,value:i}),u(this,rw,"f")[t]=i}return u(this,rv,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(e=>e.value.length+160)}),r},rE=function(){let e={};for(let t in u(this,rw,"f"))delete u(this,rw,"f")?.[t],e[t]={name:t,value:"",options:{...u(this,r_,"f").options,maxAge:0}};return e};class h extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class f extends h{}f.kind="signIn";class m extends h{}m.type="AdapterError";class y extends h{}y.type="AccessDenied";class g extends h{}g.type="CallbackRouteError";class b extends h{}b.type="ErrorPageLoop";class w extends h{}w.type="EventError";class _ extends h{}_.type="InvalidCallbackUrl";class v extends f{constructor(){super(...arguments),this.code="credentials"}}v.type="CredentialsSignin";class k extends h{}k.type="InvalidEndpoints";class E extends h{}E.type="InvalidCheck";class S extends h{}S.type="JWTSessionError";class A extends h{}A.type="MissingAdapter";class x extends h{}x.type="MissingAdapterMethods";class R extends h{}R.type="MissingAuthorize";class T extends h{}T.type="MissingSecret";class O extends f{}O.type="OAuthAccountNotLinked";class P extends f{}P.type="OAuthCallbackError";class C extends h{}C.type="OAuthProfileParseError";class j extends h{}j.type="SessionTokenError";class U extends f{}U.type="OAuthSignInError";class $ extends f{}$.type="EmailSignInError";class I extends h{}I.type="SignOutError";class D extends h{}D.type="UnknownAction";class N extends h{}N.type="UnsupportedStrategy";class H extends h{}H.type="InvalidProvider";class M extends h{}M.type="UntrustedHost";class L extends h{}L.type="Verification";class W extends f{}W.type="MissingCSRF";let K=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class Z extends h{}Z.type="DuplicateConditionalUI";class J extends h{}J.type="MissingWebAuthnAutocomplete";class B extends h{}B.type="WebAuthnVerificationError";class q extends f{}q.type="AccountNotLinked";class z extends h{}z.type="ExperimentalFeatureNotEnabled";let F=!1;function V(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let G=!1,X=!1,Y=!1,Q=["createVerificationToken","useVerificationToken","getUserByEmail"],ee=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],et=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];var er=r(55511);let en=(e,t,r,n,i)=>{let a=parseInt(e.substr(3),10)>>3||20,o=(0,er.createHmac)(e,r.byteLength?r:new Uint8Array(a)).update(t).digest(),s=Math.ceil(i/a),c=new Uint8Array(a*s+n.byteLength+1),l=0,u=0;for(let t=1;t<=s;t++)c.set(n,u),c[u+n.byteLength]=t,c.set((0,er.createHmac)(e,o).update(c.subarray(l,u+n.byteLength+1)).digest(),u),l=u,u+=a;return c.slice(0,i)};"function"!=typeof er.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{er.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let ei=async(e,t,r,i,a)=>(n||en)(e,t,r,i,a);function ea(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function eo(e,t,r,n,i){return ei(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=ea(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),ea(r,"salt"),function(e){let t=ea(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}let es=async(e,t)=>{let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))},ec=new TextEncoder,el=new TextDecoder;function eu(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function ed(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function ep(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return ed(r,t,0),ed(r,e%0x100000000,4),r}function eh(e){let t=new Uint8Array(4);return ed(t,e),t}function ef(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:el.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=el.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return function(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function em(e){let t=e;return("string"==typeof t&&(t=ec.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class ey extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class eg extends ey{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class eb extends ey{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class ew extends ey{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class e_ extends ey{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class ev extends ey{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class ek extends ey{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class eE extends ey{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class eS extends ey{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class eA extends ey{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}function ex(e){if(!eR(e))throw Error("CryptoKey instance expected")}function eR(e){return e?.[Symbol.toStringTag]==="CryptoKey"}function eT(e){return e?.[Symbol.toStringTag]==="KeyObject"}let eO=e=>eR(e)||eT(e),eP=e=>{if(!function(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function eC(e){return eP(e)&&"string"==typeof e.kty}function ej(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let eU=(e,...t)=>ej("Key must be ",e,...t);function e$(e,t,...r){return ej(`Key for the ${e} algorithm must be `,t,...r)}async function eI(e){if(eT(e)){if("secret"!==e.type)return e.export({format:"jwk"});e=e.export()}if(e instanceof Uint8Array)return{kty:"oct",k:em(e)};if(!eR(e))throw TypeError(eU(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...a}=await crypto.subtle.exportKey("jwk",e);return a}async function eD(e){return eI(e)}let eN=(e,t)=>{if("string"!=typeof e||!e)throw new eS(`${t} missing or invalid`)};async function eH(e,t){let r,n;if(eC(e))r=e;else if(eO(e))r=await eD(e);else throw TypeError(eU(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"EC":eN(r.crv,'"crv" (Curve) Parameter'),eN(r.x,'"x" (X Coordinate) Parameter'),eN(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":eN(r.crv,'"crv" (Subtype of Key Pair) Parameter'),eN(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":eN(r.e,'"e" (Exponent) Parameter'),eN(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":eN(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new e_('"kty" (Key Type) Parameter missing or unsupported')}let i=ec.encode(JSON.stringify(n));return em(await es(t,i))}let eM=Symbol();function eL(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new e_(`Unsupported JWE Algorithm: ${e}`)}}let eW=e=>crypto.getRandomValues(new Uint8Array(eL(e)>>3)),eK=(e,t)=>{if(t.length<<3!==eL(e))throw new ek("Invalid Initialization Vector length")},eZ=(e,t)=>{let r=e.byteLength<<3;if(r!==t)throw new ek(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)};function eJ(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function eB(e,t){return e.name===t}function eq(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!eB(e.algorithm,"AES-GCM"))throw eJ("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eJ(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!eB(e.algorithm,"AES-KW"))throw eJ("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eJ(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw eJ("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!eB(e.algorithm,"PBKDF2"))throw eJ("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!eB(e.algorithm,"RSA-OAEP"))throw eJ("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==r)throw eJ(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}(function(e,t){if(t&&!e.usages.includes(t))throw TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)})(e,r)}async function ez(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(eU(r,"Uint8Array"));let a=parseInt(e.slice(1,4),10),o=await crypto.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},o,t)),l=eu(i,n,c,ep(i.length<<3));return{ciphertext:c,tag:new Uint8Array((await crypto.subtle.sign("HMAC",s,l)).slice(0,a>>3)),iv:n}}async function eF(e,t,r,n,i){let a;r instanceof Uint8Array?a=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(eq(r,e,"encrypt"),a=r);let o=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},a,t)),s=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:s,iv:n}}let eV=async(e,t,r,n,i)=>{if(!eR(r)&&!(r instanceof Uint8Array))throw TypeError(eU(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(n?eK(e,n):n=eW(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&eZ(r,parseInt(e.slice(-3),10)),ez(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&eZ(r,parseInt(e.slice(1,4),10)),eF(e,t,r,n,i);default:throw new e_("Unsupported JWE Content Encryption Algorithm")}};function eG(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function eX(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(eq(e,t,r),e)}async function eY(e,t,r){let n=await eX(t,e,"wrapKey");eG(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function eQ(e,t,r){let n=await eX(t,e,"unwrapKey");eG(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}function e0(e){return eu(eh(e.length),e)}async function e1(e,t,r){let n=Math.ceil((t>>3)/32),i=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(eh(t+1)),n.set(e,4),n.set(r,4+e.length),i.set(await es("sha256",n),32*t)}return i.slice(0,t>>3)}async function e2(e,t,r,n,i=new Uint8Array(0),a=new Uint8Array(0)){let o;eq(e,"ECDH"),eq(t,"ECDH","deriveBits");let s=eu(e0(ec.encode(r)),e0(i),e0(a),eh(n));return o="X25519"===e.algorithm.name?256:Math.ceil(parseInt(e.algorithm.namedCurve.slice(-3),10)/8)<<3,e1(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,o)),n,s)}function e5(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}let e4=(e,t)=>eu(ec.encode(e),new Uint8Array([0]),t);async function e3(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new ek("PBES2 Salt Input must be 8 or more octets");let i=e4(t,e),a=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},s=await (n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(eq(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(o,s,a))}async function e6(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let a=await e3(i,e,n,t);return{encryptedKey:await eY(e.slice(-6),a,r),p2c:n,p2s:em(i)}}async function e9(e,t,r,n,i){let a=await e3(i,e,n,t);return eQ(e.slice(-6),a,r)}let e8=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},e7=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new e_(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function te(e,t,r){return eq(t,e,"encrypt"),e8(e,t),new Uint8Array(await crypto.subtle.encrypt(e7(e),t,r))}async function tt(e,t,r){return eq(t,e,"decrypt"),e8(e,t),new Uint8Array(await crypto.subtle.decrypt(e7(e),t,r))}let tr=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new e_('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new e_('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new e_('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new e_('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??!e.d,e.key_ops??r)},tn=async(e,t,r,n=!1)=>{let a=(i||=new WeakMap).get(e);if(a?.[r])return a[r];let o=await tr({...t,alg:r});return n&&Object.freeze(e),a?a[r]=o:i.set(e,{[r]:o}),o},ti=(e,t)=>{let r;let n=(i||=new WeakMap).get(e);if(n?.[t])return n[t];let a="public"===e.type,o=!!a;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,o,a?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,o,[a?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let n;switch(t){case"RSA-OAEP":n="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":n="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":n="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":n="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:n},o,a?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:n},o,[a?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let n=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},o,[a?"verify":"sign"])),"ES384"===t&&"P-384"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},o,[a?"verify":"sign"])),"ES512"===t&&"P-521"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},o,[a?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:n},o,a?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:i.set(e,{[t]:r}),r},ta=async(e,t)=>{if(e instanceof Uint8Array||eR(e))return e;if(eT(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return ti(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return tn(e,r,t)}if(eC(e))return e.k?ef(e.k):tn(e,e,t,!0);throw Error("unreachable")};function to(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new e_(`Unsupported JWE Algorithm: ${e}`)}}let ts=e=>crypto.getRandomValues(new Uint8Array(to(e)>>3));async function tc(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),a=new Uint8Array(await crypto.subtle.sign(r,n,t)),o=0,s=-1;for(;++s<32;)o|=i[s]^a[s];return 0===o}async function tl(e,t,r,n,i,a){let o,s;if(!(t instanceof Uint8Array))throw TypeError(eU(t,"Uint8Array"));let c=parseInt(e.slice(1,4),10),l=await crypto.subtle.importKey("raw",t.subarray(c>>3),"AES-CBC",!1,["decrypt"]),u=await crypto.subtle.importKey("raw",t.subarray(0,c>>3),{hash:`SHA-${c<<1}`,name:"HMAC"},!1,["sign"]),d=eu(a,n,r,ep(a.length<<3)),p=new Uint8Array((await crypto.subtle.sign("HMAC",u,d)).slice(0,c>>3));try{o=await tc(i,p)}catch{}if(!o)throw new ev;try{s=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},l,r))}catch{}if(!s)throw new ev;return s}async function tu(e,t,r,n,i,a){let o;t instanceof Uint8Array?o=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(eq(t,e,"decrypt"),o=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},o,eu(r,i)))}catch{throw new ev}}let td=async(e,t,r,n,i,a)=>{if(!eR(t)&&!(t instanceof Uint8Array))throw TypeError(eU(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new ek("JWE Initialization Vector missing");if(!i)throw new ek("JWE Authentication Tag missing");switch(eK(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&eZ(t,parseInt(e.slice(-3),10)),tl(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&eZ(t,parseInt(e.slice(1,4),10)),tu(e,t,r,n,i,a);default:throw new e_("Unsupported JWE Content Encryption Algorithm")}};async function tp(e,t,r,n){let i=e.slice(0,7),a=await eV(i,r,t,n,new Uint8Array(0));return{encryptedKey:a.ciphertext,iv:em(a.iv),tag:em(a.tag)}}async function th(e,t,r,n,i){return td(e.slice(0,7),t,r,n,i,new Uint8Array(0))}let tf=async(e,t,r,n,i={})=>{let a,o,s;switch(e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let c;if(ex(r),!e5(r))throw new e_("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:l,apv:u}=i;c=i.epk?await ta(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:p,crv:h,kty:f}=await eD(c),m=await e2(r,c,"ECDH-ES"===e?t:e,"ECDH-ES"===e?to(t):parseInt(e.slice(-5,-2),10),l,u);if(o={epk:{x:d,crv:h,kty:f}},"EC"===f&&(o.epk.y=p),l&&(o.apu=em(l)),u&&(o.apv=em(u)),"ECDH-ES"===e){s=m;break}s=n||ts(t);let y=e.slice(-6);a=await eY(y,m,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||ts(t),ex(r),a=await te(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||ts(t);let{p2c:c,p2s:l}=i;({encryptedKey:a,...o}=await e6(e,r,s,c,l));break}case"A128KW":case"A192KW":case"A256KW":s=n||ts(t),a=await eY(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||ts(t);let{iv:c}=i;({encryptedKey:a,...o}=await tp(e,r,s,c));break}default:throw new e_('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:o}},tm=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},ty=(e,t,r,n,i)=>{let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new e_(`Extension Header Parameter "${o}" is not recognized`);if(void 0===i[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&void 0===n[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)},tg=e=>e?.[Symbol.toStringTag],tb=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},tw=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(eC(t)){if(function(e){return"oct"===e.kty&&"string"==typeof e.k}(t)&&tb(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!eO(t))throw TypeError(e$(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${tg(t)} instances for symmetric algorithms must be of type "secret"`)}},t_=(e,t,r)=>{if(eC(t))switch(r){case"decrypt":case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&tb(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&tb(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!eO(t))throw TypeError(e$(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${tg(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${tg(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${tg(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${tg(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${tg(t)} instances for asymmetric algorithm encryption must be of type "public"`)}},tv=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?tw(e,t,r):t_(e,t,r)};class tk{#e;#t;#r;#n;#i;#a;#o;#s;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=e,this}async encrypt(e,t){let r,n,i,a,o;if(!this.#t&&!this.#n&&!this.#r)throw new ek("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!tm(this.#t,this.#n,this.#r))throw new ek("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let s={...this.#t,...this.#n,...this.#r};if(ty(ek,new Map,t?.crit,this.#t,s),void 0!==s.zip)throw new e_('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:l}=s;if("string"!=typeof c||!c)throw new ek('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new ek('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#a&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);tv("dir"===c?l:c,e,"encrypt");{let i;let a=await ta(e,c);({cek:n,encryptedKey:r,parameters:i}=await tf(c,l,a,this.#a,this.#s)),i&&(t&&eM in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}a=this.#t?ec.encode(em(JSON.stringify(this.#t))):ec.encode(""),this.#i?(o=em(this.#i),i=eu(a,ec.encode("."),ec.encode(o))):i=a;let{ciphertext:u,tag:d,iv:p}=await eV(l,this.#e,n,this.#o,i),h={ciphertext:em(u)};return p&&(h.iv=em(p)),d&&(h.tag=em(d)),r&&(h.encrypted_key=em(r)),o&&(h.aad=o),this.#t&&(h.protected=el.decode(a)),this.#r&&(h.unprotected=this.#r),this.#n&&(h.header=this.#n),h}}class tE{#c;constructor(e){this.#c=new tk(e)}setContentEncryptionKey(e){return this.#c.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#c.setInitializationVector(e),this}setProtectedHeader(e){return this.#c.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#c.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#c.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let tS=e=>Math.floor(e.getTime()/1e3),tA=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,tx=e=>{let t;let r=tA.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t};function tR(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let tT=e=>e.toLowerCase().replace(/^application\//,""),tO=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));class tP{#l;constructor(e){if(!eP(e))throw TypeError("JWT Claims Set MUST be an object");this.#l=structuredClone(e)}data(){return ec.encode(JSON.stringify(this.#l))}get iss(){return this.#l.iss}set iss(e){this.#l.iss=e}get sub(){return this.#l.sub}set sub(e){this.#l.sub=e}get aud(){return this.#l.aud}set aud(e){this.#l.aud=e}set jti(e){this.#l.jti=e}set nbf(e){"number"==typeof e?this.#l.nbf=tR("setNotBefore",e):e instanceof Date?this.#l.nbf=tR("setNotBefore",tS(e)):this.#l.nbf=tS(new Date)+tx(e)}set exp(e){"number"==typeof e?this.#l.exp=tR("setExpirationTime",e):e instanceof Date?this.#l.exp=tR("setExpirationTime",tS(e)):this.#l.exp=tS(new Date)+tx(e)}set iat(e){void 0===e?this.#l.iat=tS(new Date):e instanceof Date?this.#l.iat=tR("setIssuedAt",tS(e)):"string"==typeof e?this.#l.iat=tR("setIssuedAt",tS(new Date)+tx(e)):this.#l.iat=tR("setIssuedAt",e)}}class tC{#a;#o;#s;#t;#u;#d;#p;#h;constructor(e={}){this.#h=new tP(e)}setIssuer(e){return this.#h.iss=e,this}setSubject(e){return this.#h.sub=e,this}setAudience(e){return this.#h.aud=e,this}setJti(e){return this.#h.jti=e,this}setNotBefore(e){return this.#h.nbf=e,this}setExpirationTime(e){return this.#h.exp=e,this}setIssuedAt(e){return this.#h.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=e,this}replicateIssuerAsHeader(){return this.#u=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#p=!0,this}async encrypt(e,t){let r=new tE(this.#h.data());return this.#t&&(this.#u||this.#d||this.#p)&&(this.#t={...this.#t,iss:this.#u?this.#h.iss:void 0,sub:this.#d?this.#h.sub:void 0,aud:this.#p?this.#h.aud:void 0}),r.setProtectedHeader(this.#t),this.#o&&r.setInitializationVector(this.#o),this.#a&&r.setContentEncryptionKey(this.#a),this.#s&&r.setKeyManagementParameters(this.#s),r.encrypt(e,t)}}async function tj(e,t,r){let n;if(!eP(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return ef(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new e_('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return tr({...e,alg:t,ext:n});default:throw new e_('Unsupported "kty" (Key Type) Parameter value')}}let tU=async(e,t,r,n,i)=>{switch(e){case"dir":if(void 0!==r)throw new ek("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new ek("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!eP(n.epk))throw new ek('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(ex(t),!e5(t))throw new e_("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await tj(n.epk,e);if(ex(o),void 0!==n.apu){if("string"!=typeof n.apu)throw new ek('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=ef(n.apu)}catch{throw new ek("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new ek('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=ef(n.apv)}catch{throw new ek("Failed to base64url decode the apv")}}let s=await e2(o,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?to(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return s;if(void 0===r)throw new ek("JWE Encrypted Key missing");return eQ(e.slice(-6),s,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new ek("JWE Encrypted Key missing");return ex(t),tt(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new ek("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new ek('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=i?.maxPBES2Count||1e4;if(n.p2c>o)throw new ek('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new ek('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=ef(n.p2s)}catch{throw new ek("Failed to base64url decode the p2s")}return e9(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new ek("JWE Encrypted Key missing");return eQ(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new ek("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new ek('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new ek('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=ef(n.iv)}catch{throw new ek("Failed to base64url decode the iv")}try{a=ef(n.tag)}catch{throw new ek("Failed to base64url decode the tag")}return th(e,t,r,i,a)}default:throw new e_('Invalid or unsupported "alg" (JWE Algorithm) header value')}},t$=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function tI(e,t,r){let n,i,a,o,s,c,l;if(!eP(e))throw new ek("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new ek("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new ek("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new ek("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new ek("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new ek("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new ek("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new ek("JWE AAD incorrect type");if(void 0!==e.header&&!eP(e.header))throw new ek("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!eP(e.unprotected))throw new ek("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=ef(e.protected);n=JSON.parse(el.decode(t))}catch{throw new ek("JWE Protected Header is invalid")}if(!tm(n,e.header,e.unprotected))throw new ek("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...e.header,...e.unprotected};if(ty(ek,new Map,r?.crit,n,u),void 0!==u.zip)throw new e_('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:p}=u;if("string"!=typeof d||!d)throw new ek("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof p||!p)throw new ek("missing JWE Encryption Algorithm (enc) in JWE Header");let h=r&&t$("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&t$("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(h&&!h.has(d)||!h&&d.startsWith("PBES2"))throw new ew('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(p))throw new ew('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=ef(e.encrypted_key)}catch{throw new ek("Failed to base64url decode the encrypted_key")}let m=!1;"function"==typeof t&&(t=await t(n,e),m=!0),tv("dir"===d?p:d,t,"decrypt");let y=await ta(t,d);try{a=await tU(d,y,i,u,r)}catch(e){if(e instanceof TypeError||e instanceof ek||e instanceof e_)throw e;a=ts(p)}if(void 0!==e.iv)try{o=ef(e.iv)}catch{throw new ek("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=ef(e.tag)}catch{throw new ek("Failed to base64url decode the tag")}let g=ec.encode(e.protected??"");c=void 0!==e.aad?eu(g,ec.encode("."),ec.encode(e.aad)):g;try{l=ef(e.ciphertext)}catch{throw new ek("Failed to base64url decode the ciphertext")}let b={plaintext:await td(p,a,l,o,s,c)};if(void 0!==e.protected&&(b.protectedHeader=n),void 0!==e.aad)try{b.additionalAuthenticatedData=ef(e.aad)}catch{throw new ek("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(b.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(b.unprotectedHeader=e.header),m)?{...b,key:y}:b}async function tD(e,t,r){if(e instanceof Uint8Array&&(e=el.decode(e)),"string"!=typeof e)throw new ek("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:o,4:s,length:c}=e.split(".");if(5!==c)throw new ek("Invalid Compact JWE");let l=await tI({ciphertext:o,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),u={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"==typeof t?{...u,key:l.key}:u}async function tN(e,t,r){let n=await tD(e,t,r),i=function(e,t,r={}){let n,i;try{n=JSON.parse(el.decode(t))}catch{}if(!eP(n))throw new eE("JWT Claims Set must be a top-level JSON object");let{typ:a}=r;if(a&&("string"!=typeof e.typ||tT(e.typ)!==tT(a)))throw new eg('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:c,audience:l,maxTokenAge:u}=r,d=[...o];for(let e of(void 0!==u&&d.push("iat"),void 0!==l&&d.push("aud"),void 0!==c&&d.push("sub"),void 0!==s&&d.push("iss"),new Set(d.reverse())))if(!(e in n))throw new eg(`missing required "${e}" claim`,n,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(n.iss))throw new eg('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new eg('unexpected "sub" claim value',n,"sub","check_failed");if(l&&!tO(n.aud,"string"==typeof l?[l]:l))throw new eg('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=tx(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,h=tS(p||new Date);if((void 0!==n.iat||u)&&"number"!=typeof n.iat)throw new eg('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new eg('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>h+i)throw new eg('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new eg('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=h-i)throw new eb('"exp" claim timestamp check failed',n,"exp","check_failed")}if(u){let e=h-n.iat;if(e-i>("number"==typeof u?u:tx(u)))throw new eb('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new eg('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new eg('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new eg('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new eg('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let o={payload:i,protectedHeader:a};return"function"==typeof t?{...o,key:n.key}:o}let tH=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,tM=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,tL=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,tW=/^[\u0020-\u003A\u003D-\u007E]*$/,tK=Object.prototype.toString,tZ=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function tJ(e,t){let r=new tZ,n=e.length;if(n<2)return r;let i=t?.decode||tF,a=0;do{let t=e.indexOf("=",a);if(-1===t)break;let o=e.indexOf(";",a),s=-1===o?n:o;if(t>s){a=e.lastIndexOf(";",t-1)+1;continue}let c=tB(e,a,t),l=tq(e,t,c),u=e.slice(c,l);if(void 0===r[u]){let n=tB(e,t+1,s),a=tq(e,s,n),o=i(e.slice(n,a));r[u]=o}a=s+1}while(a<n);return r}function tB(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function tq(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function tz(e,t,r){let n=r?.encode||encodeURIComponent;if(!tH.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!tM.test(i))throw TypeError(`argument val is invalid: ${t}`);let a=e+"="+i;if(!r)return a;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!tL.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!tW.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){var o;if(o=r.expires,"[object Date]"!==tK.call(o)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function tF(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}let{q:tV}=c,tG=()=>Date.now()/1e3|0,tX="A256CBC-HS512";async function tY(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,a=Array.isArray(r)?r:[r],o=await t0(tX,a[0],i),s=await eH({kty:"oct",k:em(o)},`sha${o.byteLength<<3}`);return await new tC(t).setProtectedHeader({alg:"dir",enc:tX,kid:s}).setIssuedAt().setExpirationTime(tG()+n).setJti(crypto.randomUUID()).encrypt(o)}async function tQ(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:a}=await tN(t,async({kid:e,enc:t})=>{for(let r of i){let i=await t0(t,r,n);if(void 0===e||e===await eH({kty:"oct",k:em(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[tX,"A256GCM"]});return a}async function t0(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await eo("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function t1({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,a=n.origin;return t?a=await i.redirect({url:t,baseUrl:n.origin}):r&&(a=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}let t2="\x1b[31m",t5="\x1b[0m",t4={error(e){let t=e instanceof h?e.type:e.name;if(console.error(`${t2}[auth][error]${t5} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${t2}[auth][cause]${t5}:`,t.stack),r&&console.error(`${t2}[auth][details]${t5}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`\x1b[33m[auth][warn][${e}]${t5}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`\x1b[90m[auth][debug]:${t5} ${e}`,JSON.stringify(t,null,2))}};function t3(e){let t={...t4};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let t6=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{q:t9,l:t8}=c;async function t7(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function re(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new D("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new D(`Cannot parse action at ${e}`);let n=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==n.length&&2!==n.length)throw new D(`Cannot parse action at ${e}`);let[i,a]=n;if(!t6.includes(i)||a&&!["signin","callback","webauthn-options"].includes(i))throw new D(`Cannot parse action at ${e}`);return{action:i,providerId:a}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await t7(e):void 0,cookies:t9(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(n){let r=t3(t);r.error(n),r.debug("request",e)}}function rt(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,a=t8(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",a):t.set("Set-Cookie",a)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function rr(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function rn(e){let t=e=>("0"+e.toString(16)).slice(-2);return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((e,r)=>e+t(r),"")}async function ri({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,a]=t.split("|");if(a===await rr(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=rn(32),a=await rr(`${i}${e.secret}`);return{cookie:`${i}|${a}`,csrfToken:i}}function ra(e,t){if(!t)throw new W(`CSRF token was missing during an action ${e}`)}function ro(e){return null!==e&&"object"==typeof e}function rs(e,...t){if(!t.length)return e;let r=t.shift();if(ro(e)&&ro(r))for(let t in r)ro(r[t])?(ro(e[t])||(e[t]=Array.isArray(r[t])?[]:{}),rs(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return rs(e,...t)}let rc=Symbol("skip-csrf-check"),rl=Symbol("return-type-raw"),ru=Symbol("custom-fetch"),rd=Symbol("conform-internal"),rp=e=>rf({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),rh=e=>rf({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function rf(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function rm(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}let ry={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function rg({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:a,csrfToken:o,csrfDisabled:s,isPost:c}){var l,u;let p=t3(e),{providers:h,provider:f}=function(e){let{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=r.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...a}=t,o=i?.id??a.id,s=rs(a,i,{signinUrl:`${n}/signin/${o}`,callbackUrl:`${n}/callback/${o}`});if("oauth"===t.type||"oidc"===t.type){s.redirectProxyUrl??(s.redirectProxyUrl=i?.redirectProxyUrl??r.redirectProxyUrl);let e=function(e){e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));let t=rm(e.authorization,e.issuer);t&&!t.url?.searchParams.has("scope")&&t.url.searchParams.set("scope","openid profile email");let r=rm(e.token,e.issuer),n=rm(e.userinfo,e.issuer),i=e.checks??["pkce"];return e.redirectProxyUrl&&(i.includes("state")||i.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:i,userinfo:n,profile:e.profile??rp,account:e.account??rh}}(s);return e.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete e.redirectProxyUrl,e[ru]??(e[ru]=i?.[ru]),e}return s}),a=i.find(({id:e})=>e===t);if(t&&!a){let e=i.map(e=>e.id).join(", ");throw Error(`Provider with id "${t}" not found. Available providers: [${e}].`)}return{providers:i,provider:a}}({url:n,providerId:t,config:e}),y=!1;if((f?.type==="oauth"||f?.type==="oidc")&&f.redirectProxyUrl)try{y=new URL(f.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${f.redirectProxyUrl}`)}let g={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:f,cookies:rs(d(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:h,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:tY,decode:tQ,...e.jwt},events:(l=e.events??{},u=p,Object.keys(l).reduce((e,t)=>(e[t]=async(...e)=>{try{let r=l[t];return await r(...e)}catch(e){u.error(new w(e))}},e),{})),adapter:function(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new m(r);throw t.error(e),e}},r),{})}(e.adapter,p),callbacks:{...ry,...e.callbacks},logger:p,callbackUrl:n.origin,isOnRedirectProxy:y,experimental:{...e.experimental}},b=[];if(s)g.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await ri({options:g,cookieValue:i?.[g.cookies.csrfToken.name],isPost:c,bodyValue:o});g.csrfToken=e,g.csrfTokenVerified=r,t&&b.push({name:g.cookies.csrfToken.name,value:t,options:g.cookies.csrfToken.options})}let{callbackUrl:_,callbackUrlCookie:v}=await t1({options:g,cookieValue:i?.[g.cookies.callbackUrl.name],paramValue:a});return g.callbackUrl=_,v&&b.push({name:g.cookies.callbackUrl.name,value:v,options:g.cookies.callbackUrl.options}),{options:g,cookies:b}}var rb,rw,r_,rv,rk,rE,rS,rA,rx,rR,rT,rO,rP,rC,rj,rU,r$={},rI=[],rD=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,rN=Array.isArray;function rH(e,t){for(var r in t)e[r]=t[r];return e}function rM(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function rL(e,t,r){var n,i,a,o={};for(a in t)"key"==a?n=t[a]:"ref"==a?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?rS.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return rW(e,o,n,i,null)}function rW(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++rx:i,__i:-1,__u:0};return null==i&&null!=rA.vnode&&rA.vnode(a),a}function rK(e){return e.children}function rZ(e,t){this.props=e,this.context=t}function rJ(e,t){if(null==t)return e.__?rJ(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?rJ(e):null}function rB(e){(!e.__d&&(e.__d=!0)&&rR.push(e)&&!rq.__r++||rT!==rA.debounceRendering)&&((rT=rA.debounceRendering)||rO)(rq)}function rq(){var e,t,r,n,i,a,o,s;for(rR.sort(rP);e=rR.shift();)e.__d&&(t=rR.length,n=void 0,a=(i=(r=e).__v).__e,o=[],s=[],r.__P&&((n=rH({},i)).__v=i.__v+1,rA.vnode&&rA.vnode(n),rX(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[a]:null,o,null==a?rJ(i):a,!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,rY(o,n,s),n.__e!=a&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),rR.length>t&&rR.sort(rP));rq.__r=0}function rz(e,t,r,n,i,a,o,s,c,l,u){var d,p,h,f,m,y=n&&n.__k||rI,g=t.length;for(r.__d=c,function(e,t,r){var n,i,a,o,s,c=t.length,l=r.length,u=l,d=0;for(e.__k=[],n=0;n<c;n++)null!=(i=t[n])&&"boolean"!=typeof i&&"function"!=typeof i?(o=n+d,(i=e.__k[n]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?rW(null,i,null,null,null):rN(i)?rW(rK,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?rW(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,a=null,-1!==(s=i.__i=function(e,t,r,n){var i=e.key,a=e.type,o=r-1,s=r+1,c=t[r];if(null===c||c&&i==c.key&&a===c.type&&0==(131072&c.__u))return r;if(n>+(null!=c&&0==(131072&c.__u)))for(;o>=0||s<t.length;){if(o>=0){if((c=t[o])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return o;o--}if(s<t.length){if((c=t[s])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return s;s++}}return -1}(i,r,o,u))&&(u--,(a=r[s])&&(a.__u|=131072)),null==a||null===a.__v?(-1==s&&d--,"function"!=typeof i.type&&(i.__u|=65536)):s!==o&&(s==o-1?d--:s==o+1?d++:(s>o?d--:d++,i.__u|=65536))):i=e.__k[n]=null;if(u)for(n=0;n<l;n++)null!=(a=r[n])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=rJ(a)),function e(t,r,n){var i,a;if(rA.unmount&&rA.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||rQ(i,null,r)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){rA.__e(e,r)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&e(i[a],r,n||"function"!=typeof t.type);n||rM(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(a,a))}(r,t,y),c=r.__d,d=0;d<g;d++)null!=(h=r.__k[d])&&(p=-1===h.__i?r$:y[h.__i]||r$,h.__i=d,rX(e,h,p,i,a,o,s,c,l,u),f=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&rQ(p.ref,null,h),u.push(h.ref,h.__c||f,h)),null==m&&null!=f&&(m=f),65536&h.__u||p.__k===h.__k?c=function e(t,r,n){var i,a;if("function"==typeof t.type){for(i=t.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=t,r=e(i[a],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=rJ(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(h,c,e):"function"==typeof h.type&&void 0!==h.__d?c=h.__d:f&&(c=f.nextSibling),h.__d=void 0,h.__u&=-196609);r.__d=c,r.__e=m}function rF(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||rD.test(t)?r:r+"px"}function rV(e,t,r,n,i){var a;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||rF(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||rF(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n?r.u=n.u:(r.u=rC,e.addEventListener(t,a?rU:rj,a)):e.removeEventListener(t,a?rU:rj,a);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function rG(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=rC++;else if(t.t<r.u)return;return r(rA.event?rA.event(t):t)}}}function rX(e,t,r,n,i,a,o,s,c,l){var u,d,p,h,f,m,y,g,b,w,_,v,k,E,S,A,x=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),a=[s=t.__e=r.__e]),(u=rA.__b)&&u(t);e:if("function"==typeof x)try{if(g=t.props,b="prototype"in x&&x.prototype.render,w=(u=x.contextType)&&n[u.__c],_=u?w?w.props.value:u.__:n,r.__c?y=(d=t.__c=r.__c).__=d.__E:(b?t.__c=d=new x(g,_):(t.__c=d=new rZ(g,_),d.constructor=x,d.render=r0),w&&w.sub(d),d.props=g,d.state||(d.state={}),d.context=_,d.__n=n,p=d.__d=!0,d.__h=[],d._sb=[]),b&&null==d.__s&&(d.__s=d.state),b&&null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=rH({},d.__s)),rH(d.__s,x.getDerivedStateFromProps(g,d.__s))),h=d.props,f=d.state,d.__v=t,p)b&&null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),b&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(b&&null==x.getDerivedStateFromProps&&g!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(g,_),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(g,d.__s,_)||t.__v===r.__v)){for(t.__v!==r.__v&&(d.props=g,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&o.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(g,d.__s,_),b&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(h,f,m)})}if(d.context=_,d.props=g,d.__P=e,d.__e=!1,k=rA.__r,E=0,b){for(d.state=d.__s,d.__d=!1,k&&k(t),u=d.render(d.props,d.state,d.context),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[]}else do d.__d=!1,k&&k(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25);d.state=d.__s,null!=d.getChildContext&&(n=rH(rH({},n),d.getChildContext())),b&&!p&&null!=d.getSnapshotBeforeUpdate&&(m=d.getSnapshotBeforeUpdate(h,f)),rz(e,rN(A=null!=u&&u.type===rK&&null==u.key?u.props.children:u)?A:[A],t,r,n,i,a,o,s,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),y&&(d.__E=d.__=null)}catch(e){if(t.__v=null,c||null!=a){for(t.__u|=c?160:128;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else t.__e=r.__e,t.__k=r.__k;rA.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,i,a,o,s,c){var l,u,d,p,h,f,m,y=r.props,g=t.props,b=t.type;if("svg"===b?i="http://www.w3.org/2000/svg":"math"===b?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=a){for(l=0;l<a.length;l++)if((h=a[l])&&"setAttribute"in h==!!b&&(b?h.localName===b:3===h.nodeType)){e=h,a[l]=null;break}}if(null==e){if(null===b)return document.createTextNode(g);e=document.createElementNS(i,b,g.is&&g),s&&(rA.__m&&rA.__m(t,a),s=!1),a=null}if(null===b)y===g||s&&e.data===g||(e.data=g);else{if(a=a&&rS.call(e.childNodes),y=r.props||r$,!s&&null!=a)for(y={},l=0;l<e.attributes.length;l++)y[(h=e.attributes[l]).name]=h.value;for(l in y)if(h=y[l],"children"==l);else if("dangerouslySetInnerHTML"==l)d=h;else if(!(l in g)){if("value"==l&&"defaultValue"in g||"checked"==l&&"defaultChecked"in g)continue;rV(e,l,null,h,i)}for(l in g)h=g[l],"children"==l?p=h:"dangerouslySetInnerHTML"==l?u=h:"value"==l?f=h:"checked"==l?m=h:s&&"function"!=typeof h||y[l]===h||rV(e,l,h,y[l],i);if(u)s||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),rz(e,rN(p)?p:[p],t,r,n,"foreignObject"===b?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:r.__k&&rJ(r,0),s,c),null!=a)for(l=a.length;l--;)rM(a[l]);s||(l="value","progress"===b&&null==f?e.removeAttribute("value"):void 0===f||f===e[l]&&("progress"!==b||f)&&("option"!==b||f===y[l])||rV(e,l,f,y[l],i),l="checked",void 0!==m&&m!==e[l]&&rV(e,l,m,y[l],i))}return e}(r.__e,t,r,n,i,a,o,c,l);(u=rA.diffed)&&u(t)}function rY(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)rQ(r[n],r[++n],r[++n]);rA.__c&&rA.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){rA.__e(e,t.__v)}})}function rQ(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){rA.__e(e,r)}}function r0(e,t,r){return this.constructor(e,r)}function r1(e,t){var r,n,i,a,o;r=e,rA.__&&rA.__(r,t),i=(n="function"==typeof r1)?null:r1&&r1.__k||t.__k,a=[],o=[],rX(t,r=(!n&&r1||t).__k=rL(rK,null,[r]),i||r$,r$,t.namespaceURI,!n&&r1?[r1]:i?null:t.firstChild?rS.call(t.childNodes):null,a,!n&&r1?r1:i?i.__e:t.firstChild,n,o),rY(a,r,o)}rS=rI.slice,rA={__e:function(e,t,r,n){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},rx=0,rZ.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=rH({},this.state),"function"==typeof e&&(e=e(rH({},r),this.props)),e&&rH(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),rB(this))},rZ.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rB(this))},rZ.prototype.render=rK,rR=[],rO="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rP=function(e,t){return e.__v.__b-t.__v.__b},rq.__r=0,rC=0,rj=rG(!1),rU=rG(!0);var r2=/[\s\n\\/='"\0<>]/,r5=/^(xlink|xmlns|xml)([A-Z])/,r4=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,r3=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,r6=new Set(["draggable","spellcheck"]),r9=/["&<]/;function r8(e){if(0===e.length||!1===r9.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var r7={},ne=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),nt=/[A-Z]/g;function nr(){this.__d=!0}var nn,ni,na,no,ns=null,nc={},nl=[],nu=Array.isArray,nd=Object.assign;function np(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=nc),null==r.__s&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=nd({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),na&&na(e),r.render(r.props,r.state,t)}var nh=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),nf=/["&<]/,nm=0;function ny(e,t,r,n,i,a){t||(t={});var o,s,c=t;"ref"in t&&(o=t.ref,delete t.ref);var l={type:e,props:c,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--nm,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===c[s]&&(c[s]=o[s]);return rA.vnode&&rA.vnode(l),l}async function ng(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),a().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);if(!i.ok){console.error("Failed to fetch options",i);return}return i.json()}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function a(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function o(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function s(e,t){let n=await r.startAuthentication(e,t);return await o("authenticate",n)}async function c(e){a().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await o("register",t)}async function l(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e){console.error("Failed to fetch option for autofill authentication");return}try{await s(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t){console.error("Failed to fetch options for form submission");return}if("authenticate"===t.action)try{await s(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await c(t.options)}catch(e){console.error(e)}})})(),l()}let nb={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},nw=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function n_({html:e,title:t,status:r,cookies:n,theme:i,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${nw}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${function(e,t,r){var n=rA.__s;rA.__s=!0,nn=rA.__b,ni=rA.diffed,na=rA.__r,no=rA.unmount;var i=rL(rK,null);i.__k=[e];try{var a=function e(t,r,n,i,a,o,s){if(null==t||!0===t||!1===t||""===t)return"";var c=typeof t;if("object"!=c)return"function"==c?"":"string"==c?r8(t):t+"";if(nu(t)){var l,u="";a.__k=t;for(var d=0;d<t.length;d++){var p=t[d];if(null!=p&&"boolean"!=typeof p){var h,f=e(p,r,n,i,a,o,s);"string"==typeof f?u+=f:(l||(l=[]),u&&l.push(u),u="",nu(f)?(h=l).push.apply(h,f):l.push(f))}}return l?(u&&l.push(u),l):u}if(void 0!==t.constructor)return"";t.__=a,nn&&nn(t);var m=t.type,y=t.props;if("function"==typeof m){var g,b,w,_=r;if(m===rK){if("tpl"in y){for(var v="",k=0;k<y.tpl.length;k++)if(v+=y.tpl[k],y.exprs&&k<y.exprs.length){var E=y.exprs[k];if(null==E)continue;"object"==typeof E&&(void 0===E.constructor||nu(E))?v+=e(E,r,n,i,t,o,s):v+=E}return v}if("UNSTABLE_comment"in y)return"\x3c!--"+r8(y.UNSTABLE_comment)+"--\x3e";b=y.children}else{if(null!=(g=m.contextType)){var S=r[g.__c];_=S?S.props.value:g.__}var A=m.prototype&&"function"==typeof m.prototype.render;if(A)b=np(t,_),w=t.__c;else{t.__c=w={__v:t,context:_,props:t.props,setState:nr,forceUpdate:nr,__d:!0,__h:[]};for(var x=0;w.__d&&x++<25;)w.__d=!1,na&&na(t),b=m.call(w,y,_);w.__d=!0}if(null!=w.getChildContext&&(r=nd({},r,w.getChildContext())),A&&rA.errorBoundaries&&(m.getDerivedStateFromError||w.componentDidCatch)){b=null!=b&&b.type===rK&&null==b.key&&null==b.props.tpl?b.props.children:b;try{return e(b,r,n,i,t,o,s)}catch(a){return m.getDerivedStateFromError&&(w.__s=m.getDerivedStateFromError(a)),w.componentDidCatch&&w.componentDidCatch(a,nc),w.__d?(b=np(t,r),null!=(w=t.__c).getChildContext&&(r=nd({},r,w.getChildContext())),e(b=null!=b&&b.type===rK&&null==b.key&&null==b.props.tpl?b.props.children:b,r,n,i,t,o,s)):""}finally{ni&&ni(t),t.__=null,no&&no(t)}}}b=null!=b&&b.type===rK&&null==b.key&&null==b.props.tpl?b.props.children:b;try{var R=e(b,r,n,i,t,o,s);return ni&&ni(t),t.__=null,rA.unmount&&rA.unmount(t),R}catch(a){if(!o&&s&&s.onError){var T=s.onError(a,t,function(a){return e(a,r,n,i,t,o,s)});if(void 0!==T)return T;var O=rA.__e;return O&&O(a,t),""}if(!o||!a||"function"!=typeof a.then)throw a;return a.then(function a(){try{return e(b,r,n,i,t,o,s)}catch(c){if(!c||"function"!=typeof c.then)throw c;return c.then(function(){return e(b,r,n,i,t,o,s)},a)}})}}var P,C="<"+m,j="";for(var U in y){var $=y[U];if("function"!=typeof $||"class"===U||"className"===U){switch(U){case"children":P=$;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in y)continue;U="for";break;case"className":if("class"in y)continue;U="class";break;case"defaultChecked":U="checked";break;case"defaultSelected":U="selected";break;case"defaultValue":case"value":switch(U="value",m){case"textarea":P=$;continue;case"select":i=$;continue;case"option":i!=$||"selected"in y||(C+=" selected")}break;case"dangerouslySetInnerHTML":j=$&&$.__html;continue;case"style":"object"==typeof $&&($=function(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var i="-"==r[0]?r:r7[r]||(r7[r]=r.replace(nt,"-$&").toLowerCase()),a=";";"number"!=typeof n||i.startsWith("--")||ne.has(i)||(a="px;"),t=t+i+":"+n+a}}return t||void 0}($));break;case"acceptCharset":U="accept-charset";break;case"httpEquiv":U="http-equiv";break;default:if(r5.test(U))U=U.replace(r5,"$1:$2").toLowerCase();else{if(r2.test(U))continue;("-"===U[4]||r6.has(U))&&null!=$?$+="":n?r3.test(U)&&(U="panose1"===U?"panose-1":U.replace(/([A-Z])/g,"-$1").toLowerCase()):r4.test(U)&&(U=U.toLowerCase())}}null!=$&&!1!==$&&(C=!0===$||""===$?C+" "+U:C+" "+U+'="'+("string"==typeof $?r8($):$+"")+'"')}}if(r2.test(m))throw Error(m+" is not a valid HTML tag name in "+C+">");if(j||("string"==typeof P?j=r8(P):null!=P&&!1!==P&&!0!==P&&(j=e(P,r,"svg"===m||"foreignObject"!==m&&n,i,t,o,s))),ni&&ni(t),t.__=null,no&&no(t),!j&&nh.has(m))return C+"/>";var I="</"+m+">",D=C+">";return nu(j)?[D].concat(j,[I]):"string"!=typeof j?[D,j,I]:D+j+I}(e,nc,!1,void 0,i,!1,void 0);return nu(a)?a.join(""):a}catch(e){if(e.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{rA.__c&&rA.__c(e,nl),rA.__s=n,nl.length=0}}(e)}</div></body></html>`}}function nv(e){let{url:t,theme:r,query:n,cookies:i,pages:a,providers:o}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:a})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:a},e),{})}),signin(t,s){if(t)throw new D("Unsupported action");if(a?.signIn){let t=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return s&&(t=`${t}&${new URLSearchParams({error:s})}`),{redirect:t,cookies:i}}let c=o?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),l="";if(c){let{simpleWebAuthnBrowserVersion:e}=c;l=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return n_({cookies:i,theme:r,html:function(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:a,error:o}=e;"undefined"!=typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"undefined"!=typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let s=o&&(nb[o]??nb.default),c=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return ny("div",{className:"signin",children:[i?.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),ny("div",{className:"card",children:[s&&ny("div",{className:"error",children:ny("p",{children:s})}),i?.logo&&ny("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let o,s,c;("oauth"===e.type||"oidc"===e.type)&&({bg:o="#fff",brandColor:s,logo:c=`https://authjs.dev/img/providers/${e.id}.svg`}=e.style??{});let l=s??o??"#fff";return ny("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?ny("form",{action:e.signinUrl,method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),n&&ny("input",{type:"hidden",name:"callbackUrl",value:n}),ny("button",{type:"submit",className:"button",style:{"--provider-brand-color":l},tabIndex:0,children:[ny("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",e.name]}),c&&ny("img",{loading:"lazy",height:24,src:c})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&ny("hr",{}),"email"===e.type&&ny("form",{action:e.signinUrl,method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),ny("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),ny("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:a,placeholder:"email@example.com",required:!0}),ny("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&ny("form",{action:e.callbackUrl,method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>ny("div",{children:[ny("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),ny("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),ny("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&ny("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>ny("div",{children:[ny("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),ny("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),ny("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&ny("hr",{})]},e.id)})]}),c&&ny(rK,{children:ny("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${ng})(authURL, "${c}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:s,...n}),title:"Sign In",headTags:l})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:i}:n_({cookies:i,theme:r,html:function(e){let{url:t,csrfToken:r,theme:n}=e;return ny("div",{className:"signout",children:[n?.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),ny("div",{className:"card",children:[n?.logo&&ny("img",{src:n.logo,alt:"Logo",className:"logo"}),ny("h1",{children:"Signout"}),ny("p",{children:"Are you sure you want to sign out?"}),ny("form",{action:t?.toString(),method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:r}),ny("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>a?.verifyRequest?{redirect:`${a.verifyRequest}${t?.search??""}`,cookies:i}:n_({cookies:i,theme:r,html:function(e){let{url:t,theme:r}=e;return ny("div",{className:"verify-request",children:[r.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),ny("div",{className:"card",children:[r.logo&&ny("img",{src:r.logo,alt:"Logo",className:"logo"}),ny("h1",{children:"Check your email"}),ny("p",{children:"A sign in link has been sent to your email address."}),ny("p",{children:ny("a",{className:"site",href:t.origin,children:t.host})})]})]})}({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:n_({cookies:i,theme:r,...function(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,a={default:{status:200,heading:"Error",message:ny("p",{children:ny("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:ny("div",{children:[ny("p",{children:"There is a problem with the server configuration."}),ny("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:ny("div",{children:[ny("p",{children:"You do not have permission to sign in."}),ny("p",{children:ny("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:ny("div",{children:[ny("p",{children:"The sign in link is no longer valid."}),ny("p",{children:"It may have been used already or it may have expired."})]}),signin:ny("a",{className:"button",href:i,children:"Sign in"})}},{status:o,heading:s,message:c,signin:l}=a[r]??a.default;return{status:o,html:ny("div",{className:"error",children:[n?.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),ny("div",{className:"card",children:[n?.logo&&ny("img",{src:n?.logo,alt:"Logo",className:"logo"}),ny("h1",{children:s}),ny("div",{className:"message",children:c}),l]})]})}}({url:t,theme:r,error:e}),title:"Error"})}}function nk(e,t=Date.now()){return new Date(t+1e3*e)}async function nE(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:a,events:o,session:{strategy:s,generateSessionToken:c}}=n;if(!i)return{user:t,account:r};let l=r,{createUser:u,updateUser:d,getUser:p,getUserByAccount:h,getUserByEmail:f,linkAccount:m,createSession:y,getSessionAndUser:g,deleteSession:b}=i,w=null,_=null,v=!1,k="jwt"===s;if(e){if(k)try{let t=n.cookies.sessionToken.name;(w=await a.decode({...a,token:e,salt:t}))&&"sub"in w&&w.sub&&(_=await p(w.sub))}catch{}else{let t=await g(e);t&&(w=t.session,_=t.user)}}if("email"===l.type){let r=await f(t.email);return r?(_?.id!==r.id&&!k&&e&&await b(e),_=await d({id:r.id,emailVerified:new Date}),await o.updateUser?.({user:_})):(_=await u({...t,emailVerified:new Date}),await o.createUser?.({user:_}),v=!0),{session:w=k?{}:await y({sessionToken:c(),userId:_.id,expires:nk(n.session.maxAge)}),user:_,isNewUser:v}}if("webauthn"===l.type){let e=await h({providerAccountId:l.providerAccountId,provider:l.provider});if(e){if(_){if(e.id===_.id){let e={...l,userId:_.id};return{session:w,user:_,isNewUser:v,account:e}}throw new q("The account is already associated with another user",{provider:l.provider})}w=k?{}:await y({sessionToken:c(),userId:e.id,expires:nk(n.session.maxAge)});let t={...l,userId:e.id};return{session:w,user:e,isNewUser:v,account:t}}{if(_){await m({...l,userId:_.id}),await o.linkAccount?.({user:_,account:l,profile:t});let e={...l,userId:_.id};return{session:w,user:_,isNewUser:v,account:e}}if(t.email?await f(t.email):null)throw new q("Another account already exists with the same e-mail address",{provider:l.provider});_=await u({...t}),await o.createUser?.({user:_}),await m({...l,userId:_.id}),await o.linkAccount?.({user:_,account:l,profile:t}),w=k?{}:await y({sessionToken:c(),userId:_.id,expires:nk(n.session.maxAge)});let e={...l,userId:_.id};return{session:w,user:_,isNewUser:!0,account:e}}}let E=await h({providerAccountId:l.providerAccountId,provider:l.provider});if(E){if(_){if(E.id===_.id)return{session:w,user:_,isNewUser:v};throw new O("The account is already associated with another user",{provider:l.provider})}return{session:w=k?{}:await y({sessionToken:c(),userId:E.id,expires:nk(n.session.maxAge)}),user:E,isNewUser:v}}{let{provider:e}=n,{type:r,provider:i,providerAccountId:a,userId:s,...d}=l;if(l=Object.assign(e.account(d)??{},{providerAccountId:a,provider:i,type:r,userId:s}),_)return await m({...l,userId:_.id}),await o.linkAccount?.({user:_,account:l,profile:t}),{session:w,user:_,isNewUser:v};let p=t.email?await f(t.email):null;if(p){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)_=p,v=!1;else throw new O("Another account already exists with the same e-mail address",{provider:l.provider})}else _=await u({...t,emailVerified:null}),v=!0;return await o.createUser?.({user:_}),await m({...l,userId:_.id}),await o.linkAccount?.({user:_,account:l,profile:t}),{session:w=k?{}:await y({sessionToken:c(),userId:_.id,expires:nk(n.session.maxAge)}),user:_,isNewUser:v}}}function nS(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(a="oauth4webapi/v3.5.0");let nA="ERR_INVALID_ARG_VALUE",nx="ERR_INVALID_ARG_TYPE";function nR(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let nT=Symbol(),nO=Symbol(),nP=Symbol(),nC=Symbol(),nj=Symbol(),nU=Symbol(),n$=Symbol(),nI=new TextEncoder,nD=new TextDecoder;function nN(e){return"string"==typeof e?nI.encode(e):nD.decode(e)}function nH(e){return"string"==typeof e?function(e){try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw nR("The input to be decoded is not correctly encoded.",nA,e)}}(e):function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(e)}class nM extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iG,Error.captureStackTrace?.(this,this.constructor)}}class nL extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function nW(e,t,r){return new nL(e,{code:t,cause:r})}function nK(e,t){if(!(e instanceof CryptoKey))throw nR(`${t} must be a CryptoKey`,nx)}function nZ(e,t){if(nK(e,t),"private"!==e.type)throw nR(`${t} must be a private CryptoKey`,nA)}function nJ(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function nB(e){nS(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e);if(a&&!t.has("user-agent")&&t.set("user-agent",a),t.has("authorization"))throw nR('"options.headers" must not include the "authorization" header name',nA);return t}function nq(e){if("function"==typeof e&&(e=e()),!(e instanceof AbortSignal))throw nR('"options.signal" must return or be an instance of AbortSignal',nx);return e}function nz(e){return e.includes("//")?e.replace("//","/"):e}async function nF(e,t,r,n){if(!(e instanceof URL))throw nR(`"${t}" must be an instance of URL`,nx);ia(e,n?.[nT]!==!0);let i=r(new URL(e.href)),a=nB(n?.headers);return a.set("accept","application/json"),(n?.[nC]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:n?.signal?nq(n.signal):void 0})}async function nV(e,t){return nF(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=nz(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":var r,n;n=".well-known/oauth-authorization-server","/"===(r=e).pathname?r.pathname=n:r.pathname=nz(`${n}/${r.pathname}`);break;default:throw nR('"options.algorithm" must be "oidc" (default), or "oauth2"',nA)}return e},t)}function nG(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw nR(`${r} must be a number`,nx,i);if(e>0)return;if(t){if(0!==e)throw nR(`${r} must be a non-negative number`,nA,i);return}throw nR(`${r} must be a positive number`,nA,i)}catch(e){if(n)throw nW(e.message,n,i);throw e}}function nX(e,t,r,n){try{if("string"!=typeof e)throw nR(`${t} must be a string`,nx,n);if(0===e.length)throw nR(`${t} must not be empty`,nA,n)}catch(e){if(r)throw nW(e.message,r,n);throw e}}async function nY(e,t){if(!(e instanceof URL)&&e!==aS)throw nR('"expectedIssuerIdentifier" must be an instance of URL',nx);if(!nS(t,Response))throw nR('"response" must be an instance of Response',nx);if(200!==t.status)throw nW('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',i5,t);an(t);let r=await ak(t);if(nX(r.issuer,'"response" body "issuer" property',i0,{body:r}),e!==aS&&new URL(r.issuer).href!==e.href)throw nW('"response" body "issuer" property does not match the expected value',i8,{expected:e.href,body:r,attribute:"issuer"});return r}function nQ(e){(function(e,t){if(ix(e)!==t)throw n0(e,t)})(e,"application/json")}function n0(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return nW(r,i2,e)}function n1(){return nH(crypto.getRandomValues(new Uint8Array(32)))}async function n2(e){return nX(e,"codeVerifier"),nH(await crypto.subtle.digest("SHA-256",nN(e)))}function n5(e){switch(e.algorithm.name){case"RSA-PSS":return function(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new nM("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}(e);case"RSASSA-PKCS1-v1_5":return function(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new nM("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}(e);case"ECDSA":return function(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new nM("unsupported EcKeyAlgorithm namedCurve",{cause:e})}}(e);case"Ed25519":case"EdDSA":return"Ed25519";default:throw new nM("unsupported CryptoKey algorithm name",{cause:e})}}function n4(e){let t=e?.[nO];return"number"==typeof t&&Number.isFinite(t)?t:0}function n3(e){let t=e?.[nP];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function n6(){return Math.floor(Date.now()/1e3)}function n9(e){if("object"!=typeof e||null===e)throw nR('"as" must be an object',nx);nX(e.issuer,'"as.issuer"')}function n8(e){if("object"!=typeof e||null===e)throw nR('"client" must be an object',nx);nX(e.client_id,'"client.client_id"')}function n7(e,t){let r=n6()+n4(t);return{jti:n1(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function ie(e,t,r){if(!r.usages.includes("sign"))throw nR('CryptoKey instances used for signing assertions must include "sign" in their "usages"',nA);let n=`${nH(nN(JSON.stringify(e)))}.${nH(nN(JSON.stringify(t)))}`,i=nH(await crypto.subtle.sign(ac(r),r,nN(n)));return`${n}.${i}`}async function it(e){let{kty:t,e:r,n,x:i,y:a,crv:s}=await crypto.subtle.exportKey("jwk",e),c={kty:t,e:r,n,x:i,y:a,crv:s};return o.set(e,c),c}async function ir(e){return(o||=new WeakMap).get(e)||it(e)}let ii=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function ia(e,t){if(t&&"https:"!==e.protocol)throw nW("only requests to HTTPS are allowed",i4,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw nW("only HTTP and HTTPS requests are allowed",i3,e)}function io(e,t,r,n){let i;if("string"!=typeof e||!(i=ii(e)))throw nW(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?ae:at,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return ia(i,n),i}function is(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?io(e.mtls_endpoint_aliases[t],t,r,n):io(e[t],t,r,n)}class ic extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iV,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class il extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iX,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class iu extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iF,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let id="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",ip=RegExp("^[,\\s]*("+id+")\\s(.*)"),ih=RegExp("^[,\\s]*("+id+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"[,\\s]*(.*)'),im=RegExp("^[,\\s]*"+("("+id+")\\s*=\\s*(")+id+")[,\\s]*(.*)"),iy=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function ig(e){if(e.status>399&&e.status<500){an(e),nQ(e);try{let t=await e.clone().json();if(nJ(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function ib(e,t,r){if(e.status!==t){let t;if(t=await ig(e))throw await e.body?.cancel(),new ic("server responded with an error in the response body",{cause:t,response:e});throw nW(`"response" is not a conform ${r} response (unexpected HTTP status code)`,i5,e)}}function iw(e){if(!iM.has(e))throw nR('"options.DPoP" is not a valid DPoPHandle',nA)}async function i_(e,t,r,n,i,a){if(nX(e,'"accessToken"'),!(r instanceof URL))throw nR('"url" must be an instance of URL',nx);ia(r,a?.[nT]!==!0),n=nB(n),a?.DPoP&&(iw(a.DPoP),await a.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let o=await (a?.[nC]||fetch)(r.href,{body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:a?.signal?nq(a.signal):void 0});return a?.DPoP?.cacheNonce(o),o}async function iv(e,t,r,n){n9(e),n8(t);let i=is(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[nT]!==!0),a=nB(n?.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),i_(r,"GET",i,a,null,{...n,[nO]:n4(t)})}function ik(e,t,r,n){(s||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return n6()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function iE(e,t){s?.delete(e),delete t?.jwks,delete t?.uat}async function iS(e,t,r){var n;let i,a,o;let{alg:c,kid:l}=r;if(function(e){if(!ao(e.alg))throw new nM('unsupported JWS "alg" identifier',{cause:{alg:e.alg}})}(r),!s?.has(e)&&!("object"!=typeof(n=t?.[n$])||null===n||!("uat"in n)||"number"!=typeof n.uat||n6()-n.uat>=300)&&"jwks"in n&&nJ(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,nJ)&&ik(e,t?.[n$].jwks,t?.[n$].uat),s?.has(e)){if({jwks:i,age:a}=s.get(e),a>=300)return iE(e,t?.[n$]),iS(e,t,r)}else i=await ai(e,t).then(aa),a=0,ik(e,i,n6(),t?.[n$]);switch(c.slice(0,2)){case"RS":case"PS":o="RSA";break;case"ES":o="EC";break;case"Ed":o="OKP";break;default:throw new nM("unsupported JWS algorithm",{cause:{alg:c}})}let u=i.keys.filter(e=>{if(e.kty!==o||void 0!==l&&l!==e.kid||void 0!==e.alg&&c!==e.alg||void 0!==e.use&&"sig"!==e.use||e.key_ops?.includes("verify")===!1)return!1;switch(!0){case"ES256"===c&&"P-256"!==e.crv:case"ES384"===c&&"P-384"!==e.crv:case"ES512"===c&&"P-521"!==e.crv:case"Ed25519"===c&&"Ed25519"!==e.crv:case"EdDSA"===c&&"Ed25519"!==e.crv:return!1}return!0}),{0:d,length:p}=u;if(!p){if(a>=60)return iE(e,t?.[n$]),iS(e,t,r);throw nW("error when selecting a JWT verification key, no applicable keys found",i7,{header:r,candidates:u,jwks_uri:new URL(e.jwks_uri)})}if(1!==p)throw nW('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required',i7,{header:r,candidates:u,jwks_uri:new URL(e.jwks_uri)});return a_(c,d)}let iA=Symbol();function ix(e){return e.headers.get("content-type")?.split(";")[0]}async function iR(e,t,r,n,i){let a;if(n9(e),n8(t),!nS(n,Response))throw nR('"response" must be an instance of Response',nx);if(i$(n),200!==n.status)throw nW('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',i5,n);if(an(n),"application/jwt"===ix(n)){let{claims:r,jwt:o}=await au(await n.text(),am.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),n4(t),n3(t),i?.[nU]).then(iI.bind(void 0,t.client_id)).then(iN.bind(void 0,e));iC.set(n,o),a=r}else{if(t.userinfo_signed_response_alg)throw nW("JWT UserInfo Response expected",iY,n);a=await ak(n)}if(nX(a.sub,'"response" body "sub" property',i0,{body:a}),r===iA);else if(nX(r,'"expectedSubject"'),a.sub!==r)throw nW('unexpected "response" body "sub" property value',i8,{expected:r,body:a,attribute:"sub"});return a}async function iT(e,t,r,n,i,a,o){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(o?.[nC]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:o?.signal?nq(o.signal):void 0})}async function iO(e,t,r,n,i,a){let o=is(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[nT]!==!0);i.set("grant_type",n);let s=nB(a?.headers);s.set("accept","application/json"),a?.DPoP!==void 0&&(iw(a.DPoP),await a.DPoP.addProof(o,s,"POST"));let c=await iT(e,t,r,o,i,s,a);return a?.DPoP?.cacheNonce(c),c}let iP=new WeakMap,iC=new WeakMap;function ij(e){if(!e.id_token)return;let t=iP.get(e);if(!t)throw nR('"ref" was already garbage collected or did not resolve from the proper sources',nA);return t}async function iU(e,t,r,n,i){if(n9(e),n8(t),!nS(r,Response))throw nR('"response" must be an instance of Response',nx);i$(r),await ib(r,200,"Token Endpoint"),an(r);let a=await ak(r);if(nX(a.access_token,'"response" body "access_token" property',i0,{body:a}),nX(a.token_type,'"response" body "token_type" property',i0,{body:a}),a.token_type=a.token_type.toLowerCase(),"dpop"!==a.token_type&&"bearer"!==a.token_type)throw new nM("unsupported `token_type` value",{cause:{body:a}});if(void 0!==a.expires_in){let e="number"!=typeof a.expires_in?parseFloat(a.expires_in):a.expires_in;nG(e,!1,'"response" body "expires_in" property',i0,{body:a}),a.expires_in=e}if(void 0!==a.refresh_token&&nX(a.refresh_token,'"response" body "refresh_token" property',i0,{body:a}),void 0!==a.scope&&"string"!=typeof a.scope)throw nW('"response" body "scope" property must be a string',i0,{body:a});if(void 0!==a.id_token){nX(a.id_token,'"response" body "id_token" property',i0,{body:a});let o=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&o.push("auth_time"),void 0!==t.default_max_age&&(nG(t.default_max_age,!1,'"client.default_max_age"'),o.push("auth_time")),n?.length&&o.push(...n);let{claims:s,jwt:c}=await au(a.id_token,am.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),n4(t),n3(t),i?.[nU]).then(iK.bind(void 0,o)).then(iH.bind(void 0,e)).then(iD.bind(void 0,t.client_id));if(Array.isArray(s.aud)&&1!==s.aud.length){if(void 0===s.azp)throw nW('ID Token "aud" (audience) claim includes additional untrusted audiences',i9,{claims:s,claim:"aud"});if(s.azp!==t.client_id)throw nW('unexpected ID Token "azp" (authorized party) claim value',i9,{expected:t.client_id,claims:s,claim:"azp"})}void 0!==s.auth_time&&nG(s.auth_time,!1,'ID Token "auth_time" (authentication time)',i0,{claims:s}),iC.set(r,c),iP.set(a,s)}return a}function i$(e){let t;if(t=function(e){if(!nS(e,Response))throw nR('"response" must be an instance of Response',nx);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(ip),i=t?.["1"].toLowerCase();if(n=t?.["2"],!i)return;let a={};for(;n;){let r,i;if(t=n.match(ih)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}a[r.toLowerCase()]=i;continue}if(t=n.match(im)){[,r,i,n]=t,a[r.toLowerCase()]=i;continue}if(t=n.match(iy)){if(Object.keys(a).length)break;[,e,n]=t;break}return}let o={scheme:i,parameters:a};e&&(o.token68=e),r.push(o)}if(r.length)return r}(e))throw new iu("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function iI(e,t){return void 0!==t.claims.aud?iD(e,t):t}function iD(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw nW('unexpected JWT "aud" (audience) claim value',i9,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw nW('unexpected JWT "aud" (audience) claim value',i9,{expected:e,claims:t.claims,claim:"aud"});return t}function iN(e,t){return void 0!==t.claims.iss?iH(e,t):t}function iH(e,t){let r=e[aA]?.(t)??e.issuer;if(t.claims.iss!==r)throw nW('unexpected JWT "iss" (issuer) claim value',i9,{expected:r,claims:t.claims,claim:"iss"});return t}let iM=new WeakSet;async function iL(e,t,r,n,i,a,o){if(n9(e),n8(t),!iM.has(n))throw nR('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',nA);nX(i,'"redirectUri"');let s=ay(n,"code");if(!s)throw nW('no authorization code in "callbackParameters"',i0);let c=new URLSearchParams(o?.additionalParameters);return c.set("redirect_uri",i),c.set("code",s),a!==aE&&(nX(a,'"codeVerifier"'),c.set("code_verifier",a)),iO(e,t,r,"authorization_code",c,o)}let iW={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function iK(e,t){for(let r of e)if(void 0===t.claims[r])throw nW(`JWT "${r}" (${iW[r]}) claim missing`,i0,{claims:t.claims});return t}let iZ=Symbol(),iJ=Symbol();async function iB(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?iq(e,t,r,n.expectedNonce,n.maxAge,{[nU]:n[nU]}):iz(e,t,r,n)}async function iq(e,t,r,n,i,a){let o=[];switch(n){case void 0:n=iZ;break;case iZ:break;default:nX(n,'"expectedNonce" argument'),o.push("nonce")}switch(i??=t.default_max_age){case void 0:i=iJ;break;case iJ:break;default:nG(i,!1,'"maxAge" argument'),o.push("auth_time")}let s=await iU(e,t,r,o,a);nX(s.id_token,'"response" body "id_token" property',i0,{body:s});let c=ij(s);if(i!==iJ){let e=n6()+n4(t),r=n3(t);if(c.auth_time+i<e-r)throw nW("too much time has elapsed since the last End-User authentication",i6,{claims:c,now:e,tolerance:r,claim:"auth_time"})}if(n===iZ){if(void 0!==c.nonce)throw nW('unexpected ID Token "nonce" claim value',i9,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw nW('unexpected ID Token "nonce" claim value',i9,{expected:n,claims:c,claim:"nonce"});return s}async function iz(e,t,r,n){let i=await iU(e,t,r,void 0,n),a=ij(i);if(a){if(void 0!==t.default_max_age){nG(t.default_max_age,!1,'"client.default_max_age"');let e=n6()+n4(t),r=n3(t);if(a.auth_time+t.default_max_age<e-r)throw nW("too much time has elapsed since the last End-User authentication",i6,{claims:a,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==a.nonce)throw nW('unexpected ID Token "nonce" claim value',i9,{expected:void 0,claims:a,claim:"nonce"})}return i}let iF="OAUTH_WWW_AUTHENTICATE_CHALLENGE",iV="OAUTH_RESPONSE_BODY_ERROR",iG="OAUTH_UNSUPPORTED_OPERATION",iX="OAUTH_AUTHORIZATION_RESPONSE_ERROR",iY="OAUTH_JWT_USERINFO_EXPECTED",iQ="OAUTH_PARSE_ERROR",i0="OAUTH_INVALID_RESPONSE",i1="OAUTH_INVALID_REQUEST",i2="OAUTH_RESPONSE_IS_NOT_JSON",i5="OAUTH_RESPONSE_IS_NOT_CONFORM",i4="OAUTH_HTTP_REQUEST_FORBIDDEN",i3="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",i6="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",i9="OAUTH_JWT_CLAIM_COMPARISON_FAILED",i8="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",i7="OAUTH_KEY_SELECTION_FAILED",ae="OAUTH_MISSING_SERVER_METADATA",at="OAUTH_INVALID_SERVER_METADATA";function ar(e,t){if("string"!=typeof t.header.typ||t.header.typ.toLowerCase().replace(/^application\//,"")!==e)throw nW('unexpected JWT "typ" header parameter value',i0,{header:t.header});return t}function an(e){if(e.bodyUsed)throw nR('"response" body has been used already',nA)}async function ai(e,t){n9(e);let r=is(e,"jwks_uri",!1,t?.[nT]!==!0),n=nB(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[nC]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:t?.signal?nq(t.signal):void 0})}async function aa(e){if(!nS(e,Response))throw nR('"response" must be an instance of Response',nx);if(200!==e.status)throw nW('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',i5,e);an(e);let t=await ak(e,e=>(function(e,...t){if(!t.includes(ix(e)))throw n0(e,...t)})(e,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw nW('"response" body "keys" property must be an array',i0,{body:t});if(!Array.prototype.every.call(t.keys,nJ))throw nW('"response" body "keys" property members must be JWK formatted objects',i0,{body:t});return t}function ao(e){switch(e){case"PS256":case"ES256":case"RS256":case"PS384":case"ES384":case"RS384":case"PS512":case"ES512":case"RS512":case"Ed25519":case"EdDSA":return!0;default:return!1}}function as(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new nM(`unsupported ${t.name} modulusLength`,{cause:e})}function ac(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new nM("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(as(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new nM("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return as(e),e.algorithm.name;case"Ed25519":return e.algorithm.name}throw new nM("unsupported CryptoKey algorithm name",{cause:e})}async function al(e,t,r,n){let i=nN(`${e}.${t}`),a=ac(r);if(!await crypto.subtle.verify(a,r,n,i))throw nW("JWT signature verification failed",i0,{key:r,data:i,signature:n,algorithm:a})}async function au(e,t,r,n,i){let a,o,{0:s,1:c,length:l}=e.split(".");if(5===l){if(void 0!==i)e=await i(e),{0:s,1:c,length:l}=e.split(".");else throw new nM("JWE decryption is not configured",{cause:e})}if(3!==l)throw nW("Invalid JWT",i0,e);try{a=JSON.parse(nN(nH(s)))}catch(e){throw nW("failed to parse JWT Header body as base64url encoded JSON",iQ,e)}if(!nJ(a))throw nW("JWT Header must be a top level object",i0,e);if(t(a),void 0!==a.crit)throw new nM('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{o=JSON.parse(nN(nH(c)))}catch(e){throw nW("failed to parse JWT Payload body as base64url encoded JSON",iQ,e)}if(!nJ(o))throw nW("JWT Payload must be a top level object",i0,e);let u=n6()+r;if(void 0!==o.exp){if("number"!=typeof o.exp)throw nW('unexpected JWT "exp" (expiration time) claim type',i0,{claims:o});if(o.exp<=u-n)throw nW('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',i6,{claims:o,now:u,tolerance:n,claim:"exp"})}if(void 0!==o.iat&&"number"!=typeof o.iat)throw nW('unexpected JWT "iat" (issued at) claim type',i0,{claims:o});if(void 0!==o.iss&&"string"!=typeof o.iss)throw nW('unexpected JWT "iss" (issuer) claim type',i0,{claims:o});if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw nW('unexpected JWT "nbf" (not before) claim type',i0,{claims:o});if(o.nbf>u+n)throw nW('unexpected JWT "nbf" (not before) claim value',i6,{claims:o,now:u,tolerance:n,claim:"nbf"})}if(void 0!==o.aud&&"string"!=typeof o.aud&&!Array.isArray(o.aud))throw nW('unexpected JWT "aud" (audience) claim type',i0,{claims:o});return{header:a,claims:o,jwt:e}}async function ad(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;default:throw new nM(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,nN(e));return nH(i.slice(0,i.byteLength/2))}async function ap(e,t,r,n){return t===await ad(e,r,n)}async function ah(e){if(e.bodyUsed)throw nR("form_post Request instances must contain a readable body",nA,{cause:e});return e.text()}async function af(e){if("POST"!==e.method)throw nR("form_post responses are expected to use the POST method",nA,{cause:e});if("application/x-www-form-urlencoded"!==ix(e))throw nR("form_post responses are expected to use the application/x-www-form-urlencoded content-type",nA,{cause:e});return ah(e)}function am(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw nW('unexpected JWT "alg" header parameter',i0,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw nW('unexpected JWT "alg" header parameter',i0,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw nW('unexpected JWT "alg" header parameter',i0,{header:n,expected:r,reason:"default value"});return}throw nW('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function ay(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw nW(`"${t}" parameter must be provided only once`,i0);return r}let ag=Symbol(),ab=Symbol();function aw(e,t,r,n){var i;if(n9(e),n8(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw nR('"parameters" must be an instance of URLSearchParams, or URL',nx);if(ay(r,"response"))throw nW('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',i0,{parameters:r});let a=ay(r,"iss"),o=ay(r,"state");if(!a&&e.authorization_response_iss_parameter_supported)throw nW('response parameter "iss" (issuer) missing',i0,{parameters:r});if(a&&a!==e.issuer)throw nW('unexpected "iss" (issuer) response parameter value',i0,{expected:e.issuer,parameters:r});switch(n){case void 0:case ab:if(void 0!==o)throw nW('unexpected "state" response parameter encountered',i0,{expected:void 0,parameters:r});break;case ag:break;default:if(nX(n,'"expectedState" argument'),o!==n)throw nW(void 0===o?'response parameter "state" missing':'unexpected "state" response parameter value',i0,{expected:n,parameters:r})}if(ay(r,"error"))throw new il("authorization response from the server is an error",{cause:r});let s=ay(r,"id_token"),c=ay(r,"token");if(void 0!==s||void 0!==c)throw new nM("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),iM.add(i),i}async function a_(e,t){let{ext:r,key_ops:n,use:i,...a}=t;return crypto.subtle.importKey("jwk",a,function(e){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"Ed25519":case"EdDSA":return"Ed25519";default:throw new nM("unsupported JWS algorithm",{cause:{alg:e}})}}(e),!0,["verify"])}function av(e){let t=new URL(e);return t.search="",t.hash="",t.href}async function ak(e,t=nQ){let r;try{r=await e.json()}catch(r){throw t(e),nW('failed to parse "response" body as JSON',iQ,r)}if(!nJ(r))throw nW('"response" body must be a top level object',i0,{body:r});return r}let aE=Symbol(),aS=Symbol(),aA=Symbol();async function ax(e,t,r){let{cookies:n,logger:i}=r,a=n[e],o=new Date;o.setTime(o.getTime()+9e5),i.debug(`CREATE_${e.toUpperCase()}`,{name:a.name,payload:t,COOKIE_TTL:900,expires:o});let s=await tY({...r.jwt,maxAge:900,token:{value:t},salt:a.name}),c={...a.options,expires:o};return{name:a.name,value:s,options:c}}async function aR(e,t,r){try{let{logger:n,cookies:i,jwt:a}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new E(`${e} cookie was missing`);let o=await tQ({...a,token:t,salt:i[e].name});if(o?.value)return o.value;throw Error("Invalid cookie")}catch(t){throw new E(`${e} value could not be parsed`,{cause:t})}}function aT(e,t,r){let{logger:n,cookies:i}=t,a=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:a}),r.push({name:a.name,value:"",options:{...i[e].options,maxAge:0}})}function aO(e,t){return async function(r,n,i){let{provider:a,logger:o}=i;if(!a?.checks?.includes(e))return;let s=r?.[i.cookies[t].name];o.debug(`USE_${t.toUpperCase()}`,{value:s});let c=await aR(t,s,i);return aT(t,i,n),c}}let aP={async create(e){let t=n1(),r=await n2(t);return{cookie:await ax("pkceCodeVerifier",t,e),value:r}},use:aO("pkce","pkceCodeVerifier")},aC="encodedState",aj={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new E("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:n1()},i=await tY({secret:e.jwt.secret,token:n,salt:aC,maxAge:900});return{cookie:await ax("state",i,e),value:i}},use:aO("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await tQ({secret:t.jwt.secret,token:e,salt:aC});if(r)return r;throw Error("Invalid state")}catch(e){throw new E("State could not be decoded",{cause:e})}}},aU={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=n1();return{cookie:await ax("nonce",t,e),value:t}},use:aO("nonce","nonce")},a$="encodedWebauthnChallenge",aI={create:async(e,t,r)=>({cookie:await ax("webauthnChallenge",await tY({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:a$,maxAge:900}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await aR("webauthnChallenge",n,e),a=await tQ({secret:e.jwt.secret,token:i,salt:a$});if(aT("webauthnChallenge",e,r),!a)throw new E("WebAuthn challenge was missing");return a}};function aD(e){return encodeURIComponent(e).replace(/%20/g,"+")}async function aN(e,t,r){let n,i,a;let{logger:o,provider:s}=r,{token:c,userinfo:l}=s;if(c?.url&&"authjs.dev"!==c.url.host||l?.url&&"authjs.dev"!==l.url.host)n={issuer:s.issuer??"https://authjs.dev",token_endpoint:c?.url.toString(),userinfo_endpoint:l?.url.toString()};else{let e=new URL(s.issuer),t=await nV(e,{[nT]:!0,[nC]:s[ru]});if(!(n=await nY(e,t)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!n.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let u={client_id:s.clientId,...s.client};switch(u.token_endpoint_auth_method){case void 0:case"client_secret_basic":i=(e,t,r,n)=>{n.set("authorization",function(e,t){let r=aD(e),n=aD(t),i=btoa(`${r}:${n}`);return`Basic ${i}`}(s.clientId,s.clientSecret))};break;case"client_secret_post":var d;nX(d=s.clientSecret,'"clientSecret"'),i=(e,t,r,n)=>{r.set("client_id",t.client_id),r.set("client_secret",d)};break;case"client_secret_jwt":i=function(e,t){let r;nX(e,'"clientSecret"');let n=void 0;return async(t,i,a,o)=>{r||=await crypto.subtle.importKey("raw",nN(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let s={alg:"HS256"},c=n7(t,i);n?.(s,c);let l=`${nH(nN(JSON.stringify(s)))}.${nH(nN(JSON.stringify(c)))}`,u=await crypto.subtle.sign(r.algorithm,r,nN(l));a.set("client_id",i.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",`${l}.${nH(new Uint8Array(u))}`)}}(s.clientSecret);break;case"private_key_jwt":i=function(e,t){var r;let{key:n,kid:i}=(r=e)instanceof CryptoKey?{key:r}:r?.key instanceof CryptoKey?(void 0!==r.kid&&nX(r.kid,'"kid"'),{key:r.key,kid:r.kid}):{};return nZ(n,'"clientPrivateKey.key"'),async(e,r,a,o)=>{let s={alg:n5(n),kid:i},c=n7(e,r);t?.[nj]?.(s,c),a.set("client_id",r.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",await ie(s,c,n))}}(s.token.clientPrivateKey,{[nj](e,t){t.aud=[n.issuer,n.token_endpoint]}});break;case"none":i=(e,t,r,n)=>{r.set("client_id",t.client_id)};break;default:throw Error("unsupported client authentication method")}let p=[],h=await aj.use(t,p,r);try{a=aw(n,u,new URLSearchParams(e),s.checks.includes("state")?h:ag)}catch(e){if(e instanceof il){let t={providerId:s.id,...Object.fromEntries(e.cause.entries())};throw o.debug("OAuthCallbackError",t),new P("OAuth Provider returned an error",t)}throw e}let f=await aP.use(t,p,r),m=s.callbackUrl;!r.isOnRedirectProxy&&s.redirectProxyUrl&&(m=s.redirectProxyUrl);let y=await iL(n,u,i,a,m,f??"decoy",{[nT]:!0,[nC]:(...e)=>(s.checks.includes("pkce")||e[1].body.delete("code_verifier"),(s[ru]??fetch)(...e))});s.token?.conform&&(y=await s.token.conform(y.clone())??y);let g={},b="oidc"===s.type;if(s[rd])switch(s.id){case"microsoft-entra-id":case"azure-ad":{let e=await y.clone().json();if(e.error){let t={providerId:s.id,...e};throw new P(`OAuth Provider returned an error: ${e.error}`,t)}let{tid:t}=function(e){let t,r;if("string"!=typeof e)throw new eE("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new eE("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new eE("Invalid JWT");if(!n)throw new eE("JWTs must contain a payload");try{t=ef(n)}catch{throw new eE("Failed to base64url decode the payload")}try{r=JSON.parse(el.decode(t))}catch{throw new eE("Failed to parse the decoded payload as JSON")}if(!eP(r))throw new eE("Invalid JWT Claims Set");return r}(e.id_token);if("string"==typeof t){let e=n.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",r=new URL(n.issuer.replace(e,t)),i=await nV(r,{[nC]:s[ru]});n=await nY(r,i)}}}let w=await iB(n,u,y,{expectedNonce:await aU.use(t,p,r),requireIdToken:b});if(b){let t=ij(w);if(g=t,s[rd]&&"apple"===s.id)try{g.user=JSON.parse(e?.user)}catch{}if(!1===s.idToken){let e=await iv(n,u,w.access_token,{[nC]:s[ru],[nT]:!0});g=await iR(n,u,t.sub,e)}}else if(l?.request){let e=await l.request({tokens:w,provider:s});e instanceof Object&&(g=e)}else if(l?.url){let e=await iv(n,u,w.access_token,{[nC]:s[ru],[nT]:!0});g=await e.json()}else throw TypeError("No userinfo endpoint configured");return w.expires_in&&(w.expires_at=Math.floor(Date.now()/1e3)+Number(w.expires_in)),{...await aH(g,s,w,o),profile:g,cookies:p}}async function aH(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new C(r,{provider:t.id}))}}async function aM(e,t,r,n){let i=await aJ(e,t,r),{cookie:a}=await aI.create(e,i.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function aL(e,t,r,n){let i=await aZ(e,t,r),{cookie:a}=await aI.create(e,i.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function aW(e,t,r){let n;let{adapter:i,provider:a}=e,o=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!o||"object"!=typeof o||!("id"in o)||"string"!=typeof o.id)throw new h("Invalid WebAuthn Authentication response");let s=az(aq(o.id)),c=await i.getAuthenticator(s);if(!c)throw new h(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:s})}`);let{challenge:l}=await aI.use(e,t.cookies,r);try{var u;let r=a.getRelayingParty(e,t);n=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:l,response:o,authenticator:{...u=c,credentialDeviceType:u.credentialDeviceType,transports:aF(u.transports),credentialID:aq(u.credentialID),credentialPublicKey:aq(u.credentialPublicKey)},expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new B(e)}let{verified:d,authenticationInfo:p}=n;if(!d)throw new B("WebAuthn authentication response could not be verified");try{let{newCounter:e}=p;await i.updateAuthenticatorCounter(c.credentialID,e)}catch(e){throw new m(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:s,oldCounter:c.counter,newCounter:p.newCounter})}`,e)}let f=await i.getAccount(c.providerAccountId,a.id);if(!f)throw new h(`WebAuthn account not found in database: ${JSON.stringify({credentialID:s,providerAccountId:c.providerAccountId})}`);let y=await i.getUser(f.userId);if(!y)throw new h(`WebAuthn user not found in database: ${JSON.stringify({credentialID:s,providerAccountId:c.providerAccountId,userID:f.userId})}`);return{account:f,user:y}}async function aK(e,t,r){var n;let i;let{provider:a}=e,o=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!o||"object"!=typeof o||!("id"in o)||"string"!=typeof o.id)throw new h("Invalid WebAuthn Registration response");let{challenge:s,registerData:c}=await aI.use(e,t.cookies,r);if(!c)throw new h("Missing user registration data in WebAuthn challenge cookie");try{let r=a.getRelayingParty(e,t);i=await a.simpleWebAuthn.verifyRegistrationResponse({...a.verifyRegistrationOptions,expectedChallenge:s,response:o,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new B(e)}if(!i.verified||!i.registrationInfo)throw new B("WebAuthn registration response could not be verified");let l={providerAccountId:az(i.registrationInfo.credentialID),provider:e.provider.id,type:a.type},u={providerAccountId:l.providerAccountId,counter:i.registrationInfo.counter,credentialID:az(i.registrationInfo.credentialID),credentialPublicKey:az(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=o.response.transports,n?.join(","))};return{user:c,account:l,authenticator:u}}async function aZ(e,t,r){let{provider:n,adapter:i}=e,a=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:o.id,allowCredentials:a?.map(e=>({id:aq(e.credentialID),type:"public-key",transports:aF(e.transports)}))})}async function aJ(e,t,r){let{provider:n,adapter:i}=e,a=r.id?await i.listAuthenticatorsByUserId(r.id):null,o=rn(32),s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:o,userName:r.email,userDisplayName:r.name??void 0,rpID:s.id,rpName:s.name,excludeCredentials:a?.map(e=>({id:aq(e.credentialID),type:"public-key",transports:aF(e.transports)}))})}function aB(e){let{provider:t,adapter:r}=e;if(!r)throw new A("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new H("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function aq(e){return new Uint8Array(Buffer.from(e,"base64"))}function az(e){return Buffer.from(e).toString("base64")}function aF(e){return e?e.split(","):void 0}async function aV(e,t,r,n){if(!t.provider)throw new H("Callback route called without provider");let{query:i,body:a,method:o,headers:s}=e,{provider:c,adapter:l,url:u,callbackUrl:d,pages:p,jwt:f,events:m,callbacks:y,session:{strategy:b,maxAge:w},logger:_}=t,k="jwt"===b;try{if("oauth"===c.type||"oidc"===c.type){let o;let s=c.authorization?.url.searchParams.get("response_mode")==="form_post"?a:i;if(t.isOnRedirectProxy&&s?.state){let e=await aj.decode(s.state,t);if(e?.origin&&new URL(e.origin).origin!==t.url.origin){let t=`${e.origin}?${new URLSearchParams(s)}`;return _.debug("Proxy redirecting to",t),{redirect:t,cookies:n}}}let h=await aN(s,e.cookies,t);h.cookies.length&&n.push(...h.cookies),_.debug("authorization result",h);let{user:g,account:b,profile:v}=h;if(!g||!b||!v)return{redirect:`${u}/signin`,cookies:n};if(l){let{getUserByAccount:e}=l;o=await e({providerAccountId:b.providerAccountId,provider:c.id})}let E=await aG({user:o??g,account:b,profile:v},t);if(E)return{redirect:E,cookies:n};let{user:S,session:A,isNewUser:x}=await nE(r.value,g,b,t);if(k){let e={name:S.name,email:S.email,picture:S.image,sub:S.id?.toString()},i=await y.jwt({token:e,user:S,account:b,profile:v,isNewUser:x,trigger:x?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*w);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:A.sessionToken,options:{...t.cookies.sessionToken.options,expires:A.expires}});if(await m.signIn?.({user:S,account:b,profile:v,isNewUser:x}),x&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("email"===c.type){let e=i?.token,a=i?.email;if(!e){let t=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!e}});throw t.name="Configuration",t}let o=c.secret??t.secret,s=await l.useVerificationToken({identifier:a,token:await rr(`${e}${o}`)}),u=!!s,h=u&&s.expires.valueOf()<Date.now();if(!u||h||a&&s.identifier!==a)throw new L({hasInvite:u,expired:h});let{identifier:g}=s,b=await l.getUserByEmail(g)??{id:crypto.randomUUID(),email:g,emailVerified:null},_={providerAccountId:b.email,userId:b.id,type:"email",provider:c.id},v=await aG({user:b,account:_},t);if(v)return{redirect:v,cookies:n};let{user:E,session:S,isNewUser:A}=await nE(r.value,b,_,t);if(k){let e={name:E.name,email:E.email,picture:E.image,sub:E.id?.toString()},i=await y.jwt({token:e,user:E,account:_,isNewUser:A,trigger:A?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*w);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:S.sessionToken,options:{...t.cookies.sessionToken.options,expires:S.expires}});if(await m.signIn?.({user:E,account:_,isNewUser:A}),A&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("credentials"===c.type&&"POST"===o){let e=a??{};Object.entries(i??{}).forEach(([e,t])=>u.searchParams.set(e,t));let l=await c.authorize(e,new Request(u,{headers:s,method:o,body:JSON.stringify(a)}));if(l)l.id=l.id?.toString()??crypto.randomUUID();else throw new v;let p={providerAccountId:l.id,type:"credentials",provider:c.id},h=await aG({user:l,account:p,credentials:e},t);if(h)return{redirect:h,cookies:n};let g={name:l.name,email:l.email,picture:l.image,sub:l.id},b=await y.jwt({token:g,user:l,account:p,isNewUser:!1,trigger:"signIn"});if(null===b)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await f.encode({...f,token:b,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*w);let o=r.chunk(i,{expires:a});n.push(...o)}return await m.signIn?.({user:l,account:p}),{redirect:d,cookies:n}}else if("webauthn"===c.type&&"POST"===o){let i,a,o;let s=e.body?.action;if("string"!=typeof s||"authenticate"!==s&&"register"!==s)throw new h("Invalid action parameter");let c=aB(t);switch(s){case"authenticate":{let t=await aW(c,e,n);i=t.user,a=t.account;break}case"register":{let r=await aK(t,e,n);i=r.user,a=r.account,o=r.authenticator}}await aG({user:i,account:a},t);let{user:l,isNewUser:u,session:g,account:b}=await nE(r.value,i,a,t);if(!b)throw new h("Error creating or finding account");if(o&&l.id&&await c.adapter.createAuthenticator({...o,userId:l.id}),k){let e={name:l.name,email:l.email,picture:l.image,sub:l.id?.toString()},i=await y.jwt({token:e,user:l,account:b,isNewUser:u,trigger:u?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*w);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:g.sessionToken,options:{...t.cookies.sessionToken.options,expires:g.expires}});if(await m.signIn?.({user:l,account:b,isNewUser:u}),u&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}throw new H(`Callback for provider type (${c.type}) is not supported`)}catch(t){if(t instanceof h)throw t;let e=new g(t,{provider:c.id});throw _.debug("callback route error details",{method:o,query:i,body:a}),e}}async function aG(e,t){let r;let{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof h)throw e;throw new y(e)}if(!r)throw new y("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function aX(e,t,r,n,i){let{adapter:a,jwt:o,events:s,callbacks:c,logger:l,session:{strategy:u,maxAge:d}}=e,p={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},h=t.value;if(!h)return p;if("jwt"===u){try{let r=e.cookies.sessionToken.name,a=await o.decode({...o,token:h,salt:r});if(!a)throw Error("Invalid JWT");let l=await c.jwt({token:a,...n&&{trigger:"update"},session:i}),u=nk(d);if(null!==l){let e={user:{name:l.name,email:l.email,image:l.picture},expires:u.toISOString()},n=await c.session({session:e,token:l});p.body=n;let i=await o.encode({...o,token:l,salt:r}),a=t.chunk(i,{expires:u});p.cookies?.push(...a),await s.session?.({session:n,token:l})}else p.cookies?.push(...t.clean())}catch(e){l.error(new S(e)),p.cookies?.push(...t.clean())}return p}try{let{getSessionAndUser:r,deleteSession:o,updateSession:l}=a,u=await r(h);if(u&&u.session.expires.valueOf()<Date.now()&&(await o(h),u=null),u){let{user:t,session:r}=u,a=e.session.updateAge,o=r.expires.valueOf()-1e3*d+1e3*a,f=nk(d);o<=Date.now()&&await l({sessionToken:h,expires:f});let m=await c.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});p.body=m,p.cookies?.push({name:e.cookies.sessionToken.name,value:h,options:{...e.cookies.sessionToken.options,expires:f}}),await s.session?.({session:m})}else h&&p.cookies?.push(...t.clean())}catch(e){l.error(new j(e))}return p}async function aY(e,t){let r,n;let{logger:i,provider:a}=t,o=a.authorization?.url;if(!o||"authjs.dev"===o.host){let e=new URL(a.issuer),t=await nV(e,{[nC]:a[ru],[nT]:!0}),r=await nY(e,t).catch(t=>{if(!(t instanceof TypeError)||"Invalid URL"!==t.message)throw t;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${e}`)});if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");o=new URL(r.authorization_endpoint)}let s=o.searchParams,c=a.callbackUrl;!t.isOnRedirectProxy&&a.redirectProxyUrl&&(c=a.redirectProxyUrl,n=a.callbackUrl,i.debug("using redirect proxy",{redirect_uri:c,data:n}));let l=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:c,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),e);for(let e in l)s.set(e,l[e]);let u=[];a.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let d=await aj.create(t,n);if(d&&(s.set("state",d.value),u.push(d.cookie)),a.checks?.includes("pkce")){if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===a.type&&(a.checks=["nonce"]);else{let{value:e,cookie:r}=await aP.create(t);s.set("code_challenge",e),s.set("code_challenge_method","S256"),u.push(r)}}let p=await aU.create(t);return p&&(s.set("nonce",p.value),u.push(p.cookie)),"oidc"!==a.type||o.searchParams.has("scope")||o.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:o,cookies:u,provider:a}),{redirect:o.toString(),cookies:u}}async function aQ(e,t){let r;let{body:n}=e,{provider:i,callbacks:a,adapter:o}=t,s=(i.normalizeIdentifier??function(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`})(n?.email),c={id:crypto.randomUUID(),email:s,emailVerified:null},l=await o.getUserByEmail(s)??c,u={providerAccountId:s,userId:l.id,type:"email",provider:i.id};try{r=await a.signIn({user:l,account:u,email:{verificationRequest:!0}})}catch(e){throw new y(e)}if(!r)throw new y("AccessDenied");if("string"==typeof r)return{redirect:await a.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:d,theme:p}=t,h=await i.generateVerificationToken?.()??rn(32),f=new Date(Date.now()+(i.maxAge??86400)*1e3),m=i.secret??t.secret,g=new URL(t.basePath,t.url.origin),b=i.sendVerificationRequest({identifier:s,token:h,expires:f,url:`${g}/callback/${i.id}?${new URLSearchParams({callbackUrl:d,token:h,email:s})}`,provider:i,theme:p,request:new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}),w=o.createVerificationToken?.({identifier:s,token:await rr(`${h}${m}`),expires:f});return await Promise.all([b,w]),{redirect:`${g}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function a0(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await aY(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await aQ(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function a1(e,t,r){let{jwt:n,events:i,callbackUrl:a,logger:o,session:s}=r,c=t.value;if(!c)return{redirect:a,cookies:e};try{if("jwt"===s.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:c,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(c);await i.signOut?.({session:e})}}catch(e){o.error(new I(e))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function a2(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,a=t.value;if(!a)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:a,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(a);if(e)return e.user}return null}async function a5(e,t,r,n){let i=aB(t),{provider:a}=i,{action:o}=e.query??{};if("register"!==o&&"authenticate"!==o&&void 0!==o)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let s=await a2(t,r),c=s?{user:s,exists:!0}:await a.getUserInfo(t,e),l=c?.user;switch(function(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t){if(!n||i)return"authenticate";return"register"}}return null}(o,!!s,c)){case"authenticate":return aL(i,e,l,n);case"register":if("string"==typeof l?.email)return aM(i,e,l,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function a4(e,t){let{action:r,providerId:n,error:i,method:a}=e,o=t.skipCSRFCheck===rc,{options:s,cookies:c}=await rg({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===a,csrfDisabled:o}),l=new p(s.cookies.sessionToken,e.cookies,s.logger);if("GET"===a){let t=nv({...s,query:e.query,cookies:c});switch(r){case"callback":return await aV(e,s,l,c);case"csrf":return t.csrf(o,s,c);case"error":return t.error(i);case"providers":return t.providers(s.providers);case"session":return await aX(s,l,c);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await a5(e,s,l,c)}}else{let{csrfTokenVerified:t}=s;switch(r){case"callback":return"credentials"===s.provider.type&&ra(r,t),await aV(e,s,l,c);case"session":return ra(r,t),await aX(s,l,c,!0,e.body?.data);case"signin":return ra(r,t),await a0(e,c,s);case"signout":return ra(r,t),await a1(c,l,s)}}throw new D(`Cannot handle action: ${r}`)}function a3(e,t,r,n,i){let a;let o=i?.basePath,s=n.AUTH_URL??n.NEXTAUTH_URL;if(s)a=new URL(s),o&&"/"!==o&&"/"!==a.pathname&&(a.pathname!==o&&t3(i).warn("env-url-basepath-mismatch"),a.pathname="/");else{let e=r.get("x-forwarded-host")??r.get("host"),n=r.get("x-forwarded-proto")??t??"https",i=n.endsWith(":")?n:n+":";a=new URL(`${i}//${e}`)}let c=a.toString().replace(/\/$/,"");if(o){let t=o?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${c}/${t}/${e}`)}return new URL(`${c}/${e}`)}async function a6(e,t){let r=t3(t),n=await re(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=function(e,t){let{url:r}=e,n=[];if(!F&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new M(`Host must be trusted. URL was: ${e.url}`);if(!t.secret?.length)return new T("Please define a `secret`");let i=e.query?.callbackUrl;if(i&&!V(i,r.origin))return new _(`Invalid callback URL. Received: ${i}`);let{callbackUrl:a}=d(t.useSecureCookies??"https:"===r.protocol),o=e.cookies?.[t.cookies?.callbackUrl?.name??a.name];if(o&&!V(o,r.origin))return new _(`Invalid callback URL. Received: ${o}`);let s=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e;let{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new k(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required`)}if("credentials"===t.type)G=!0;else if("email"===t.type)X=!0;else if("webauthn"===t.type){var c;if(Y=!0,t.simpleWebAuthnBrowserVersion&&(c=t.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(c)))return new h(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(s)return new Z("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(s=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new J(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(G){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new N("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new R("Must define an authorize() handler to use credentials authentication provider")}let{adapter:l,session:u}=t,p=[];if(X||u?.strategy==="database"||!u?.strategy&&l){if(X){if(!l)return new A("Email login requires an adapter");p.push(...Q)}else{if(!l)return new A("Database session requires an adapter");p.push(...ee)}}if(Y){if(!t.experimental?.enableWebAuthn)return new z("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(n.push("experimental-webauthn"),!l)return new A("WebAuthn requires an adapter");p.push(...et)}if(l){let e=p.filter(e=>!(e in l));if(e.length)return new x(`Required adapter methods were missing: ${e.join(", ")}`)}return F||(F=!0),n}(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||"GET"!==n.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:e,theme:a}=t,o=e?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||o)return o&&r.error(new b(`The error page ${e?.error} should not require authentication`)),rt(nv({theme:a}).error("Configuration"));let s=`${n.url.origin}${e.error}?error=Configuration`;return Response.redirect(s)}let a=e.headers?.has("X-Auth-Return-Redirect"),o=t.raw===rl;try{let e=await a4(n,t);if(o)return e;let r=rt(e),i=r.headers.get("Location");if(!a||!i)return r;return Response.json({url:i},{headers:r.headers})}catch(d){r.error(d);let i=d instanceof h;if(i&&o&&!a)throw d;if("POST"===e.method&&"session"===n.action)return Response.json(null,{status:400});let s=new URLSearchParams({error:d instanceof h&&K.has(d.type)?d.type:"Configuration"});d instanceof v&&s.set("code",d.code);let c=i&&d.kind||"error",l=t.pages?.[c]??`${t.basePath}/${c.toLowerCase()}`,u=`${n.url.origin}${l}?${s}`;if(a)return Response.json({url:u});return Response.redirect(u)}}var a9=r(15911);function a8(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new a9.NextRequest(n.replace(i,r),e)}function a7(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(e,t,r=!1){try{let n=e.AUTH_URL;n&&(t.basePath?r||t3(t).warn("env-url-basepath-redundant"):t.basePath=new URL(n).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let{id:r}="function"==typeof t?t({}):t,n=r.toUpperCase().replace(/-/g,"_"),i=e[`AUTH_${n}_ID`],a=e[`AUTH_${n}_SECRET`],o=e[`AUTH_${n}_ISSUER`],s=e[`AUTH_${n}_KEY`],c="function"==typeof t?t({clientId:i,clientSecret:a,issuer:o,apiKey:s}):t;return"oauth"===c.type||"oidc"===c.type?(c.clientId??(c.clientId=i),c.clientSecret??(c.clientSecret=a),c.issuer??(c.issuer=o)):"email"===c.type&&(c.apiKey??(c.apiKey=s)),c})}(process.env,e,!0)}}var oe=r(92519),ot=r(16422);async function or(e,t){return a6(new Request(a3("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function on(e){return"function"==typeof e}function oi(e,t){return"function"==typeof e?async(...r)=>{if(!r.length){let r=await (0,ot.b)(),n=await e(void 0);return t?.(n),or(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],a=await e(n);return t?.(a),oa([n,i],a)}if(on(r[0])){let n=r[0];return async(...r)=>{let i=await e(r[0]);return t?.(i),oa(r,i,n)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],a=await e(n);return t?.(a),or(new Headers(n.headers),a).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return Promise.resolve((0,ot.b)()).then(t=>or(t,e).then(e=>e.json()));if(t[0]instanceof Request)return oa([t[0],t[1]],e);if(on(t[0])){let r=t[0];return async(...t)=>oa(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return or(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function oa(e,t,r){let n=a8(e[0]),i=await or(n.headers,t),a=await i.json(),o=!0;t.callbacks?.authorized&&(o=await t.callbacks.authorized({request:n,auth:a}));let s=a9.NextResponse.next?.();if(o instanceof Response){s=o;let e=o.headers.get("Location"),{pathname:r}=n.nextUrl;e&&function(e,t,r){let n=t.replace(`${e}/`,""),i=Object.values(r.pages??{});return(oo.has(n)||i.includes(t))&&t===e}(r,new URL(e).pathname,t)&&(o=!0)}else if(r)n.auth=a,s=await r(n,e[1])??a9.NextResponse.next();else if(!o){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),s=a9.NextResponse.redirect(t)}}let c=new Response(s?.body,s);for(let e of i.headers.getSetCookie())c.headers.append("set-cookie",e);return c}r(95055);let oo=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var os=r(61618);async function oc(e,t={},r,n){let i=new Headers(await (0,ot.b)()),{redirect:a=!0,redirectTo:o,...s}=t instanceof FormData?Object.fromEntries(t):t,c=o?.toString()??i.get("Referer")??"/",l=a3("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return l.searchParams.append("callbackUrl",c),a&&(0,os.redirect)(l.toString()),l.toString();let u=`${l}/${e}?${new URLSearchParams(r)}`,d={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){d={id:i,type:r?.type??n.type};break}}if(!d.id){let e=`${l}?${new URLSearchParams({callbackUrl:c})}`;return a&&(0,os.redirect)(e),e}"credentials"===d.type&&(u=u.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let p=new Request(u,{method:"POST",headers:i,body:new URLSearchParams({...s,callbackUrl:c})}),h=await a6(p,{...n,raw:rl,skipCSRFCheck:rc}),f=await (0,oe.U)();for(let e of h?.cookies??[])f.set(e.name,e.value,e.options);let m=(h instanceof Response?h.headers.get("Location"):h.redirect)??u;return a?(0,os.redirect)(m):m}async function ol(e,t){let r=new Headers(await (0,ot.b)());r.set("Content-Type","application/x-www-form-urlencoded");let n=a3("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),a=new Request(n,{method:"POST",headers:r,body:i}),o=await a6(a,{...t,raw:rl,skipCSRFCheck:rc}),s=await (0,oe.U)();for(let e of o?.cookies??[])s.set(e.name,e.value,e.options);return e?.redirect??!0?(0,os.redirect)(o.redirect):o}async function ou(e,t){let r=new Headers(await (0,ot.b)());r.set("Content-Type","application/json");let n=new Request(a3("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await a6(n,{...t,raw:rl,skipCSRFCheck:rc}),a=await (0,oe.U)();for(let e of i?.cookies??[])a.set(e.name,e.value,e.options);return i.body}function od(e){if("function"==typeof e){let t=async t=>{let r=await e(t);return a7(r),a6(a8(t),r)};return{handlers:{GET:t,POST:t},auth:oi(e,e=>a7(e)),signIn:async(t,r,n)=>{let i=await e(void 0);return a7(i),oc(t,r,n,i)},signOut:async t=>{let r=await e(void 0);return a7(r),ol(t,r)},unstable_update:async t=>{let r=await e(void 0);return a7(r),ou(t,r)}}}a7(e);let t=t=>a6(a8(t),e);return{handlers:{GET:t,POST:t},auth:oi(e),signIn:(t,r,n)=>oc(t,r,n,e),signOut:t=>ol(t,e),unstable_update:t=>ou(t,e)}}},75047:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(73250);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"}))})},79174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return i}});let n=r(48589);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==o)return n.ReflectAdapter.get(t,o,i)},set(t,r,i,a){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,a);let o=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);return n.ReflectAdapter.set(t,s??r,i,a)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==a&&n.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===a||n.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},80898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return i.RedirectType},forbidden:function(){return o.forbidden},notFound:function(){return a.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return s.unauthorized},unstable_rethrow:function(){return c.unstable_rethrow}});let n=r(89179),i=r(53164),a=r(19403),o=r(59726),s=r(85993),c=r(22637);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85551:(e,t,r)=>{var n;(()=>{var i={226:function(i,a){!function(o,s){"use strict";var c="function",l="undefined",u="object",d="string",p="major",h="model",f="name",m="type",y="vendor",g="version",b="architecture",w="console",_="mobile",v="tablet",k="smarttv",E="wearable",S="embedded",A="Amazon",x="Apple",R="ASUS",T="BlackBerry",O="Browser",P="Chrome",C="Firefox",j="Google",U="Huawei",$="Microsoft",I="Motorola",D="Opera",N="Samsung",H="Sharp",M="Sony",L="Xiaomi",W="Zebra",K="Facebook",Z="Chromium OS",J="Mac OS",B=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},q=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},z=function(e,t){return typeof e===d&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===l?e:e.substring(0,350)},G=function(e,t){for(var r,n,i,a,o,l,d=0;d<t.length&&!o;){var p=t[d],h=t[d+1];for(r=n=0;r<p.length&&!o&&p[r];)if(o=p[r++].exec(e))for(i=0;i<h.length;i++)l=o[++n],typeof(a=h[i])===u&&a.length>0?2===a.length?typeof a[1]==c?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3===a.length?typeof a[1]!==c||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):void 0:this[a[0]]=l?a[1].call(this,l,a[2]):void 0:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):s):this[a]=l||s;d+=2}},X=function(e,t){for(var r in t)if(typeof t[r]===u&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(z(t[r][n],e))return"?"===r?s:r}else if(z(t[r],e))return"?"===r?s:r;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,g],[/opios[\/ ]+([\w\.]+)/i],[g,[f,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[f,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[f,"UC"+O]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+O],g],[/\bfocus\/([\w\.]+)/i],[g,[f,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[f,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[f,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[f,"MIUI "+O]],[/fxios\/([-\w\.]+)/i],[g,[f,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+O],g],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,K],g],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[f,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,P+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[f,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[g,X,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[f,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,g],[/(cobalt)\/([\w\.]+)/i],[f,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,F]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[y,N],[m,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[y,N],[m,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[y,x],[m,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[y,x],[m,v]],[/(macintosh);/i],[h,[y,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[y,H],[m,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[y,U],[m,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[y,U],[m,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[y,L],[m,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[y,L],[m,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[y,"OPPO"],[m,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[y,"Vivo"],[m,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[y,"Realme"],[m,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[y,I],[m,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[y,I],[m,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[y,"LG"],[m,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[y,"LG"],[m,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[y,"Lenovo"],[m,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[y,"Nokia"],[m,_]],[/(pixel c)\b/i],[h,[y,j],[m,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[y,j],[m,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[y,M],[m,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[y,M],[m,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[y,"OnePlus"],[m,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[y,A],[m,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[y,A],[m,_]],[/(playbook);[-\w\),; ]+(rim)/i],[h,y,[m,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[y,T],[m,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[y,R],[m,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[y,R],[m,_]],[/(nexus 9)/i],[h,[y,"HTC"],[m,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[h,/_/g," "],[m,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[y,"Acer"],[m,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[y,"Meizu"],[m,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,h,[m,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,h,[m,v]],[/(surface duo)/i],[h,[y,$],[m,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[y,"Fairphone"],[m,_]],[/(u304aa)/i],[h,[y,"AT&T"],[m,_]],[/\bsie-(\w*)/i],[h,[y,"Siemens"],[m,_]],[/\b(rct\w+) b/i],[h,[y,"RCA"],[m,v]],[/\b(venue[\d ]{2,7}) b/i],[h,[y,"Dell"],[m,v]],[/\b(q(?:mv|ta)\w+) b/i],[h,[y,"Verizon"],[m,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[y,"Barnes & Noble"],[m,v]],[/\b(tm\d{3}\w+) b/i],[h,[y,"NuVision"],[m,v]],[/\b(k88) b/i],[h,[y,"ZTE"],[m,v]],[/\b(nx\d{3}j) b/i],[h,[y,"ZTE"],[m,_]],[/\b(gen\d{3}) b.+49h/i],[h,[y,"Swiss"],[m,_]],[/\b(zur\d{3}) b/i],[h,[y,"Swiss"],[m,v]],[/\b((zeki)?tb.*\b) b/i],[h,[y,"Zeki"],[m,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],h,[m,v]],[/\b(ns-?\w{0,9}) b/i],[h,[y,"Insignia"],[m,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[y,"NextBook"],[m,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],h,[m,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],h,[m,_]],[/\b(ph-1) /i],[h,[y,"Essential"],[m,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[y,"Envizen"],[m,v]],[/\b(trio[-\w\. ]+) b/i],[h,[y,"MachSpeed"],[m,v]],[/\btu_(1491) b/i],[h,[y,"Rotor"],[m,v]],[/(shield[\w ]+) b/i],[h,[y,"Nvidia"],[m,v]],[/(sprint) (\w+)/i],[y,h,[m,_]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[y,$],[m,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[y,W],[m,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[y,W],[m,_]],[/smart-tv.+(samsung)/i],[y,[m,k]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[y,N],[m,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,"LG"],[m,k]],[/(apple) ?tv/i],[y,[h,x+" TV"],[m,k]],[/crkey/i],[[h,P+"cast"],[y,j],[m,k]],[/droid.+aft(\w)( bui|\))/i],[h,[y,A],[m,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[y,H],[m,k]],[/(bravia[\w ]+)( bui|\))/i],[h,[y,M],[m,k]],[/(mitv-\w{5}) bui/i],[h,[y,L],[m,k]],[/Hbbtv.*(technisat) (.*);/i],[y,h,[m,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,V],[h,V],[m,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,h,[m,w]],[/droid.+; (shield) bui/i],[h,[y,"Nvidia"],[m,w]],[/(playstation [345portablevi]+)/i],[h,[y,M],[m,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[y,$],[m,w]],[/((pebble))app/i],[y,h,[m,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[y,x],[m,E]],[/droid.+; (glass) \d/i],[h,[y,j],[m,E]],[/droid.+; (wt63?0{2,3})\)/i],[h,[y,W],[m,E]],[/(quest( 2| pro)?)/i],[h,[y,K],[m,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[m,S]],[/(aeobc)\b/i],[h,[y,A],[m,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[m,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[m,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,_]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[g,X,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[g,X,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,J],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,g],[/\(bb(10);/i],[g,[f,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[f,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[f,P+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,Z],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,g],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,g]]},ee=function(e,t){if(typeof e===u&&(t=e,e=s),!(this instanceof ee))return new ee(e,t).getResult();var r=typeof o!==l&&o.navigator?o.navigator:s,n=e||(r&&r.userAgent?r.userAgent:""),i=r&&r.userAgentData?r.userAgentData:s,a=t?B(Q,t):Q,w=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[f]=s,t[g]=s,G.call(t,n,a.browser),t[p]=typeof(e=t[g])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:s,w&&r&&r.brave&&typeof r.brave.isBrave==c&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[b]=s,G.call(e,n,a.cpu),e},this.getDevice=function(){var e={};return e[y]=s,e[h]=s,e[m]=s,G.call(e,n,a.device),w&&!e[m]&&i&&i.mobile&&(e[m]=_),w&&"Macintosh"==e[h]&&r&&typeof r.standalone!==l&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[h]="iPad",e[m]=v),e},this.getEngine=function(){var e={};return e[f]=s,e[g]=s,G.call(e,n,a.engine),e},this.getOS=function(){var e={};return e[f]=s,e[g]=s,G.call(e,n,a.os),w&&!e[f]&&i&&"Unknown"!=i.platform&&(e[f]=i.platform.replace(/chrome os/i,Z).replace(/macos/i,J)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===d&&e.length>350?V(e,350):e,this},this.setUA(n),this};ee.VERSION="1.0.35",ee.BROWSER=q([f,g,p]),ee.CPU=q([b]),ee.DEVICE=q([h,y,m,w,_,k,v,E,S]),ee.ENGINE=ee.OS=q([f,g]),typeof a!==l?(i.exports&&(a=i.exports=ee),a.UAParser=ee):r.amdO?void 0!==(n=(function(){return ee}).call(t,r,t,e))&&(e.exports=n):typeof o!==l&&(o.UAParser=ee);var et=typeof o!==l&&(o.jQuery||o.Zepto);if(et&&!et.ua){var er=new ee;et.ua=er.getResult(),et.ua.get=function(){return er.getUA()},et.ua.set=function(e){er.setUA(e);var t=er.getResult();for(var r in t)et.ua[r]=t[r]}}}("object"==typeof window?window:this)}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}},n=!0;try{i[e].call(r.exports,r,r.exports,o),n=!1}finally{n&&delete a[e]}return r.exports}o.ab=__dirname+"/",e.exports=o(226)})()},85993:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(29446).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},89179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return c},redirect:function(){return s}});let n=r(66470),i=r(53164),a=r(19121).actionAsyncStorage;function o(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let a=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",a}function s(e,t){var r;throw null!=t||(t=(null==a?void 0:null==(r=a.getStore())?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),o(e,t,n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){throw void 0===t&&(t=i.RedirectType.replace),o(e,t,n.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},92020:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return s},decrypt:function(){return u},encrypt:function(){return l},getActionEncryptionKey:function(){return m},getClientReferenceManifestForRsc:function(){return f},getServerModuleMap:function(){return h},setReferenceManifestsSingleton:function(){return p},stringToUint8Array:function(){return c}});let i=r(49827),a=r(28540),o=r(29294);function s(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function c(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function l(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function u(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}let d=Symbol.for("next.server.action-manifests");function p({page:e,clientReferenceManifest:t,serverActionsManifest:r,serverModuleMap:n}){var i;let o=null==(i=globalThis[d])?void 0:i.clientReferenceManifestsPerPage;globalThis[d]={clientReferenceManifestsPerPage:{...o,[(0,a.normalizeAppPath)(e)]:t},serverActionsManifest:r,serverModuleMap:n}}function h(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return e.serverModuleMap}function f(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:t}=e,r=o.workAsyncStorage.getStore();if(!r)return function(e){let t=Object.values(e),r={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let e of t)r.clientModules={...r.clientModules,...e.clientModules},r.edgeRscModuleMapping={...r.edgeRscModuleMapping,...e.edgeRscModuleMapping},r.rscModuleMapping={...r.rscModuleMapping,...e.rscModuleMapping};return r}(t);let n=t[r.route];if(!n)throw Object.defineProperty(new i.InvariantError(`Missing Client Reference Manifest for ${r.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return n}async function m(){if(n)return n;let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Object.defineProperty(new i.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return n=await crypto.subtle.importKey("raw",c(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},92519:(e,t,r)=>{"use strict";Object.defineProperty(t,"U",{enumerable:!0,get:function(){return p}});let n=r(26983),i=r(50480),a=r(29294),o=r(63033),s=r(7045),c=r(41757),l=r(6478),u=r(60888),d=(r(11249),r(99969));function p(){let e="cookies",t=a.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(t.forceStatic)return f(n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type)return function(e,t){let r=h.get(t);if(r)return r;let n=(0,l.makeHangingPromise)(t.renderSignal,"`cookies()`");return h.set(t,n),Object.defineProperties(n,{[Symbol.iterator]:{value:function(){let r="`cookies()[Symbol.iterator]()`",n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},size:{get(){let r="`cookies().size`",n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},get:{value:function(){let r;r=0==arguments.length?"`cookies().get()`":`\`cookies().get(${m(arguments[0])})\``;let n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},getAll:{value:function(){let r;r=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${m(arguments[0])})\``;let n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},has:{value:function(){let r;r=0==arguments.length?"`cookies().has()`":`\`cookies().has(${m(arguments[0])})\``;let n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},set:{value:function(){let r;if(0==arguments.length)r="`cookies().set()`";else{let e=arguments[0];r=e?`\`cookies().set(${m(e)}, ...)\``:"`cookies().set(...)`"}let n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},delete:{value:function(){let r;r=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${m(arguments[0])})\``:`\`cookies().delete(${m(arguments[0])}, ...)\``;let n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},clear:{value:function(){let r="`cookies().clear()`",n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},toString:{value:function(){let r="`cookies().toString()`",n=g(e,r);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}}}),n}(t.route,r);"prerender-ppr"===r.type?(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,s.throwToInterruptStaticGeneration)(e,t,r)}(0,s.trackDynamicDataInDynamicRender)(t,r)}let u=(0,o.getExpectedRequestStore)(e);return f((0,n.areCookiesMutableInCurrentPhase)(u)?u.userspaceMutableCookies:u.cookies)}let h=new WeakMap;function f(e){let t=h.get(e);if(t)return t;let r=Promise.resolve(e);return h.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):b.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):w.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function m(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}let y=(0,u.createDedupedByCallsiteServerErrorLoggerDev)(g);function g(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function b(){return this.getAll().map(e=>[e.name,e]).values()}function w(e){for(let e of this.getAll())this.delete(e.name);return e}},95055:(e,t,r)=>{"use strict";let n=r(63033),i=r(29294),a=r(7045),o=r(60888),s=r(41757),c=r(44777),l=new WeakMap;function u(e){let t=new d(e),r=Promise.resolve(t);return Object.defineProperty(r,"isEnabled",{get:()=>t.isEnabled,set(e){Object.defineProperty(r,"isEnabled",{value:e,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),r.enable=t.enable.bind(t),r.disable=t.disable.bind(t),r}class d{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){h("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){h("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}let p=(0,o.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function h(e){let t=i.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});if("after"===r.phase)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type){let n=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,n,r)}else if("prerender-ppr"===r.type)(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=Object.defineProperty(new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}},95069:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})}};